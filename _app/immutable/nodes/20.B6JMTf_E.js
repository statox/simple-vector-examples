import"../chunks/DsnmJJEf.js";import{o as ee,a as te}from"../chunks/hDrwkfIk.js";import{p as ae,f as ne,b as re,_ as ie,g as t,c as se,d as oe,e as y,$ as _,h as b,s as D,u as E,a0 as S}from"../chunks/CY1iBhr2.js";import{r as C}from"../chunks/cAKsN3DC.js";import{b as W}from"../chunks/CVuNliJ1.js";import{V as n,P as ce}from"../chunks/DnDkWYNL.js";n.prototype.wrap=function(s,o){return this.x<s.x?this.x=o.x-(s.x-this.x):this.x>o.x&&(this.x=s.x+(this.x-o.x)),this.y>s.y?this.y=o.y-(s.y-this.y):this.y<o.y&&(this.y=s.y+(this.y-o.y)),this.clampX(o.x,s.x).clampY(s.y,o.y)};var de=ne('<!> <div>nb point: <input type="number"/></div> <div>separationForce: <input type="number"/></div> <div>cohesionForce: <input type="number"/></div> <div> </div>',1);function xe(s,o){ae(o,!0);let q,m=D(300),k=D(1.2),X=D(1);const f=new n(0,500),h=new n(500,0),w=50,v=f.clone().addScalarX(w).subtractScalarY(w),x=h.clone().subtractScalarX(w).addScalarY(w);let r=E(()=>new Array(t(m)).fill(0).map(()=>new n().randomize(v,x))),p=E(()=>new Array(t(m)).fill(0).map(()=>new n(1,0).rotateBy(Math.random()*2*Math.PI)));const G=new n(0,1),H=new n(0,-1),J=new n(1,0),K=new n(-1,0),i=new n(h.x/2,f.y/2),c=n.randomUnitVector().resize(2),N=30**2;let P=D(0),V=0,B=0;const j=(e,g,a)=>{if(e.distanceSq(a)>N)return!1;const u=a.clone().subtract(e);return!(g.angleDegWith(u)>90)},Q=e=>{e.setup=()=>{q=e,e.createCanvas(h.x,f.y),e.stroke(0)},e.draw=()=>{e.background(100),e.strokeWeight(5),e.stroke("red"),e.point(i.x,i.y),c.rotateByDeg(Math.random()*20-10),(c.x<0&&i.x<v.x||c.x>0&&i.x>x.x)&&c.invertX(),(c.y<0&&i.y<x.y||c.y>0&&i.y>v.y)&&c.invertY(),i.add(c).wrap(f,h),e.mouseX>0&&e.mouseX<e.width&&e.mouseY>0&&e.mouseY<e.height&&(i.x=e.mouseX,i.y=e.mouseY),e.strokeWeight(3),e.stroke("black");for(let a=0;a<t(m);a++){const M=[];for(let l=0;l<t(m);l++)l!==a&&j(t(r)[a],t(p)[a],t(r)[l])&&M.push(l);const u=new n(0,0),d=new n(0,0);for(const l of M){const L=t(r)[a].clone().subtract(t(r)[l]);u.add(L),d.add(t(p)[l])}j(t(r)[a],t(p)[a],i)&&d.add(i.clone().subtract(t(r)[a]));let Z=new n(0,0);u.isZero()||(u.normalize().resize(t(k)),Z=u.clone().invert().resize(t(X))),t(r)[a].x<v.x&&d.add(J),t(r)[a].x>x.x&&d.add(K),t(r)[a].y<x.y&&d.add(G),t(r)[a].y>v.y&&d.add(H),t(p)[a].rotateByDeg(Math.random()*20-10).rotateTowardsDeg(d,20).add(u).add(Z).normalize(),t(r)[a].add(t(p)[a]).clampY(f.y,h.y).clampX(h.x,f.x),e.point(t(r)[a].x,t(r)[a].y)}const g=Date.now();g-B>1e3&&(b(P,e.frameCount-V),V=e.frameCount,B=g)}};ee(()=>{q?.remove()});var A=de(),I=re(A);ce(I,{sketch:Q});var Y=y(I,2),T=y(_(Y));C(T),S(Y);var z=y(Y,2),$=y(_(z));C($),S(z);var F=y(z,2),O=y(_(F));C(O),S(F);var U=y(F,2),R=_(U);S(U),ie(()=>te(R,`FPS: ${t(P)??""}`)),W(T,()=>t(m),e=>b(m,e)),W($,()=>t(k),e=>b(k,e)),W(O,()=>t(X),e=>b(X,e)),se(s,A),oe()}export{xe as component};
