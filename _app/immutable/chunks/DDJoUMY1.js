import"./DsnmJJEf.js";import{e as yt,o as mt,d as xt,f as gt,i as vt,a as Q}from"./DzQtXQoP.js";import{e as rt,b as wt,s as q,h as S,al as bt,a as _t,z as M,$ as Mt,r as Nt,H as Tt,c as F,d as k,k as P,am as Et,an as At,f as Z,i as St,g as Dt,ao as Yt,y as zt,ap as j,aq as it,ar as Xt,as as pt,j as st,p as It,at as Pt,au as Ct,av as W,aw as nt,ax as Ot,ay as Rt,az as Bt,aA as qt,Y as kt,af as Wt,u as Ht,D as at,F as K,J as ht,K as L,M as ut,I as $,G as tt,O,P as C,B as Ut,Q as Vt}from"./D3IAL-Rx.js";import{a as Zt}from"./BRzKQYUk.js";import{p as R,_ as Lt}from"./Dxb9mMGN.js";import{i as Gt}from"./94QMMRZN.js";function Jt(a,t,e){for(var s=a.items,h=[],f=t.length,y=0;y<f;y++)Rt(t[y].e,h,!0);var v=f>0&&h.length===0&&e!==null;if(v){var b=e.parentNode;Bt(b),b.append(e),s.clear(),A(a,t[0].prev,t[f-1].next)}qt(h,()=>{for(var g=0;g<f;g++){var w=t[g];v||(s.delete(w.k),A(a,w.prev,w.next)),nt(w.e,!v)}})}function Kt(a,t,e,s,h,f=null){var y=a,v={flags:t,items:new Map,first:null};{var b=a;y=S?q(bt(b)):b.appendChild(rt())}S&&_t();var g=null,w=!1,_=new Map,n=Mt(()=>{var i=e();return Xt(i)?i:i==null?[]:it(i)}),m,d;function r(){Qt(d,m,v,_,y,h,t,s,e),f!==null&&(m.length===0?g?st(g):g=Z(()=>f(y)):g!==null&&It(g,()=>{g=null}))}wt(()=>{d??=kt,m=M(n);var i=m.length;if(w&&i===0)return;w=i===0;let l=!1;if(S){var u=Nt(y)===Tt;u!==(i===0)&&(y=F(),q(y),k(!1),l=!0)}if(S){for(var o=null,x,c=0;c<i;c++){if(P.nodeType===Et&&P.data===At){y=P,l=!0,k(!1);break}var T=m[c],N=s(T,c);x=G(P,v,o,null,T,N,c,h,t,e),v.items.set(N,x),o=x}i>0&&q(F())}if(S)i===0&&f&&(g=Z(()=>f(y)));else if(St()){var D=new Set,E=Dt;for(c=0;c<i;c+=1){T=m[c],N=s(T,c);var X=v.items.get(N)??_.get(N);X?ot(X,T,c):(x=G(null,v,null,null,T,N,c,h,t,e,!0),_.set(N,x)),D.add(N)}for(const[p,I]of v.items)D.has(p)||E.skipped_effects.add(I.e);E.add_callback(r)}else r();l&&k(!0),M(n)}),S&&(y=P)}function Qt(a,t,e,s,h,f,y,v,b){var g=t.length,w=e.items,_=e.first,n=_,m,d=null,r=[],i=[],l,u,o,x;for(x=0;x<g;x+=1){if(l=t[x],u=v(l,x),o=w.get(u),o===void 0){var c=s.get(u);if(c!==void 0){s.delete(u),w.set(u,c);var T=d?d.next:n;A(e,d,c),A(e,c,T),H(c,T,h),d=c}else{var N=n?n.e.nodes_start:h;d=G(N,e,d,d===null?e.first:d.next,l,u,x,f,y,b)}w.set(u,d),r=[],i=[],n=d.next;continue}if(ot(o,l,x),(o.e.f&W)!==0&&st(o.e),o!==n){if(m!==void 0&&m.has(o)){if(r.length<i.length){var D=i[0],E;d=D.prev;var X=r[0],p=r[r.length-1];for(E=0;E<r.length;E+=1)H(r[E],D,h);for(E=0;E<i.length;E+=1)m.delete(i[E]);A(e,X.prev,p.next),A(e,d,X),A(e,p,D),n=D,d=p,x-=1,r=[],i=[]}else m.delete(o),H(o,n,h),A(e,o.prev,o.next),A(e,o,d===null?e.first:d.next),A(e,d,o),d=o;continue}for(r=[],i=[];n!==null&&n.k!==u;)(n.e.f&W)===0&&(m??=new Set).add(n),i.push(n),n=n.next;if(n===null)continue;o=n}r.push(o),d=o,n=o.next}if(n!==null||m!==void 0){for(var I=m===void 0?[]:it(m);n!==null;)(n.e.f&W)===0&&I.push(n),n=n.next;var dt=I.length;if(dt>0){var ft=g===0?h:null;Jt(e,I,ft)}}a.first=e.first&&e.first.e,a.last=d&&d.e;for(var ct of s.values())nt(ct.e);s.clear()}function ot(a,t,e,s){Yt(a.v,t),a.i=e}function G(a,t,e,s,h,f,y,v,b,g,w){var _=(b&Pt)!==0,n=(b&Ct)===0,m=_?n?zt(h,!1,!1):j(h):h,d=(b&pt)===0?y:j(y),r={i:d,v:m,k:f,a:null,e:null,prev:e,next:s};try{if(a===null){var i=document.createDocumentFragment();i.append(a=rt())}return r.e=Z(()=>v(a,m,d,g),S),r.e.prev=e&&e.e,r.e.next=s&&s.e,e===null?w||(t.first=r):(e.next=r,e.e.next=r.e),s!==null&&(s.prev=r,s.e.prev=r.e),r}finally{}}function H(a,t,e){for(var s=a.next?a.next.e.nodes_start:e,h=t?t.e.nodes_start:e,f=a.e.nodes_start;f!==null&&f!==s;){var y=Ot(f);h.before(f),f=y}}function A(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Ft(a,t,e){Wt(()=>{var s=Ht(()=>t(a,e?.())||{});if(s?.destroy)return()=>s.destroy()})}function J(a,t,e,s){var h=a.__style;if(S||h!==t){var f=Zt(t);(!S||f!==a.getAttribute("style"))&&(f==null?a.removeAttribute("style"):a.style.cssText=f),a.__style=t}return s}class Y extends Error{constructor(){super("Tried to divide by 0")}}class z{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new z(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new z(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new z(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new Y;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new Y;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new Y;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new Y;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new Y;return this.x/=t,this}divideScalarY(t){if(t===0)throw new Y;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const s=this.magnitude();let h=0;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");h=e}if(e<0||t<0)throw RangeError("Can't clamp the magnitude to a negative value");const f=Math.max(Math.min(s,t),h);return this.resize(f),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const s=Math.min(t.x,e.x),h=Math.max(t.x,e.x);return this.x=et(s,h),this}randomizeY(t,e){const s=Math.min(t.y,e.y),h=Math.max(t.y,e.y);return this.y=et(s,h),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new z(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){if(t.isZero())throw new Y;const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return B(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return B(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){if(this.isZero()||t.isZero())return 0;const e=(this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()),s=Math.max(-1,Math.min(1,e));return Math.acos(s)}angleDegWith(t){return B(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return B(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),s=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=s,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const s=this.angleWith(t);let h=Math.min(s,e);return this.cross(t)<0&&(h=-h),this.rotateBy(h)}rotateTowardsDeg(t,e){return this.rotateTowards(t,U(e))}rotateByDeg(t){const e=U(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=U(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),s=this.distanceY(t);return e*e+s*s}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){if(t==null)throw new TypeError("The magnitude argument must be defined");return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan2(this.y,this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const lt=180/Math.PI;function et(a,t){return Math.random()*(t-a)+a}function B(a){return a*lt}function U(a){return a/lt}var jt=K('<div class="m-0"></div>');function $t(a,t){at(t,!1);let e=R(t,"target",12,void 0),s=R(t,"sketch",8,void 0),h=R(t,"parentDivStyle",8,"display: block;"),f=R(t,"debug",8,!1),y;const v=yt(),b={ref(){v("ref",e())},instance(){v("instance",y)}};function g(n){return e(n),{destroy(){e(void 0)}}}function w(n,m){return m.forEach(([d,r])=>n[d]=r),n}mt(async()=>{const n=await Lt(()=>import("./BeuaAw6C.js").then(i=>i.p),[],import.meta.url),{default:m}=n,r=Object.entries(n).filter(([i,l])=>l instanceof Function&&i[0]!=="_"&&i!=="default");f()&&console.log("available p5 native classes",r),y=new m(i=>(i=w(i,r),f()&&console.log("p5 instance",i),window._p5Instance=i,s()(i)),e()),b.ref(),b.instance()}),Gt();var _=jt();Ft(_,n=>g?.(n)),ht(()=>J(_,h())),L(a,_),ut()}const V=a=>a.preventDefault();var te=K("<div><code> </code></div> <div> </div>",1),ee=K('<div><!></div> <div class="vector-values svelte-1r2uwu0"></div>',1);function ue(a,t){at(t,!0);let e,s=Vt(1),h=null;const f=(r,i)=>{const l=r.width/2+M(s)*i.x,u=r.height/2-M(s)*i.y;r.strokeWeight(3);try{const o=i.clone().invert().rotateByDeg(45).resize(10);r.line(l,u,l+o.x,u-o.y);const x=i.clone().invert().rotateByDeg(-45).resize(10);r.line(l,u,l+x.x,u-x.y),r.line(r.width/2,r.height/2,l,u)}catch{r.circle(r.width/2,r.height/2,10)}},y=(r,i)=>{r.stroke(125,80),r.strokeWeight(1);for(let l=0;l<i.size/i.graduation;l++){const u=r.width/2+l*M(s)*i.graduation;r.line(u,0,u,r.height);const o=r.width/2-l*M(s)*i.graduation;r.line(o,0,o,r.height);const x=r.height/2+l*M(s)*i.graduation;r.line(0,x,r.width,x);const c=r.height/2-l*M(s)*i.graduation;r.line(0,c,r.width,c)}},v=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,b=(r,i)=>{Ut(s,r.width/i.size)},g=(r,i)=>new z(i.x-r.width/2,r.height/2-i.y).divideScalar(M(s)),w=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{b(r,t.grid),r.background(240,240,240),y(r,t.grid);for(const{vec:i,color:l}of t.vectors)r.stroke(l),f(r,i);if(r.mouseIsPressed&&v(r)){const i=g(r,new z(r.mouseX,r.mouseY)),l=t.vectors.filter(u=>u.isDraggable);if(h!==null){const u=l[h];u.onUpdate&&u.onUpdate(i)}else for(let u=0;u<l.length;u++){const o=l[u],x=i.distance(o.vec);if(o.onUpdate&&(x<t.grid.graduation/2||l.length===1)){h=u,o.onUpdate(i);break}}}else h=null}};gt(()=>{e?.remove()});var _=ee(),n=$(_);n.__touchmove=[V],n.__touchstart=[V];var m=O(n);$t(m,{sketch:w}),C(n);var d=tt(n,2);Kt(d,21,()=>t.vectors,r=>r.name,(r,i)=>{var l=te(),u=$(l),o=O(u),x=O(o,!0);C(o),C(u);var c=tt(u,2),T=O(c,!0);C(c),ht(N=>{J(u,`color: ${M(i).color??""}`),Q(x,M(i).name),J(c,`color: ${M(i).color??""}`),Q(T,N)},[()=>M(i).vec.toString()]),L(r,l)}),C(d),vt("touchmove",n,V,!0,!0),L(a,_),ut()}xt(["touchmove","touchstart"]);export{ue as M,z as V};
