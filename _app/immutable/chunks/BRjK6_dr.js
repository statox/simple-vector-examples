import"./DsnmJJEf.js";import{e as ct,o as yt,f as mt,a as K}from"./C7HefTNw.js";import{e as et,b as xt,s as B,h as S,al as gt,a as vt,z as M,$ as wt,r as bt,H as _t,c as Q,d as q,k as P,am as Mt,an as Nt,f as V,i as Tt,g as Et,ao as At,y as St,ap as F,aq as rt,ar as Yt,as as zt,j as it,p as Dt,at as Xt,au as pt,av as k,aw as st,ax as It,ay as Pt,az as Ct,aA as Ot,Y as Rt,af as Bt,u as qt,D as nt,F as J,J as at,K as Z,M as ht,I as j,G as $,P as C,B as kt,Q as Wt,O as W}from"./DUP_8v5R.js";import{a as Ht}from"./BRzKQYUk.js";import{p as O,_ as Ut}from"./BsuHOuQY.js";import{i as Vt}from"./w7Gt3Det.js";function Zt(a,t,e){for(var n=a.items,u=[],d=t.length,f=0;f<d;f++)Pt(t[f].e,u,!0);var v=d>0&&u.length===0&&e!==null;if(v){var b=e.parentNode;Ct(b),b.append(e),n.clear(),A(a,t[0].prev,t[d-1].next)}Ot(u,()=>{for(var g=0;g<d;g++){var w=t[g];v||(n.delete(w.k),A(a,w.prev,w.next)),st(w.e,!v)}})}function Lt(a,t,e,n,u,d=null){var f=a,v={flags:t,items:new Map,first:null};{var b=a;f=S?B(gt(b)):b.appendChild(et())}S&&vt();var g=null,w=!1,_=new Map,h=wt(()=>{var i=e();return Yt(i)?i:i==null?[]:rt(i)}),c,r;function s(){Gt(r,c,v,_,f,u,t,n,e),d!==null&&(c.length===0?g?it(g):g=V(()=>d(f)):g!==null&&Dt(g,()=>{g=null}))}xt(()=>{r??=Rt,c=M(h);var i=c.length;if(w&&i===0)return;w=i===0;let o=!1;if(S){var y=bt(f)===_t;y!==(i===0)&&(f=Q(),B(f),q(!1),o=!0)}if(S){for(var l=null,m,x=0;x<i;x++){if(P.nodeType===Mt&&P.data===Nt){f=P,o=!0,q(!1);break}var N=c[x],E=n(N,x);m=L(P,v,l,null,N,E,x,u,t,e),v.items.set(E,m),l=m}i>0&&B(Q())}if(S)i===0&&d&&(g=V(()=>d(f)));else if(Tt()){var Y=new Set,T=Et;for(x=0;x<i;x+=1){N=c[x],E=n(N,x);var X=v.items.get(E)??_.get(E);X?ut(X,N,x):(m=L(null,v,null,null,N,E,x,u,t,e,!0),_.set(E,m)),Y.add(E)}for(const[p,I]of v.items)Y.has(p)||T.skipped_effects.add(I.e);T.add_callback(s)}else s();o&&q(!0),M(h)}),S&&(f=P)}function Gt(a,t,e,n,u,d,f,v,b){var g=t.length,w=e.items,_=e.first,h=_,c,r=null,s=[],i=[],o,y,l,m;for(m=0;m<g;m+=1){if(o=t[m],y=v(o,m),l=w.get(y),l===void 0){var x=n.get(y);if(x!==void 0){n.delete(y),w.set(y,x);var N=r?r.next:h;A(e,r,x),A(e,x,N),H(x,N,u),r=x}else{var E=h?h.e.nodes_start:u;r=L(E,e,r,r===null?e.first:r.next,o,y,m,d,f,b)}w.set(y,r),s=[],i=[],h=r.next;continue}if(ut(l,o,m),(l.e.f&k)!==0&&it(l.e),l!==h){if(c!==void 0&&c.has(l)){if(s.length<i.length){var Y=i[0],T;r=Y.prev;var X=s[0],p=s[s.length-1];for(T=0;T<s.length;T+=1)H(s[T],Y,u);for(T=0;T<i.length;T+=1)c.delete(i[T]);A(e,X.prev,p.next),A(e,r,X),A(e,p,Y),h=Y,r=p,m-=1,s=[],i=[]}else c.delete(l),H(l,h,u),A(e,l.prev,l.next),A(e,l,r===null?e.first:r.next),A(e,r,l),r=l;continue}for(s=[],i=[];h!==null&&h.k!==y;)(h.e.f&k)===0&&(c??=new Set).add(h),i.push(h),h=h.next;if(h===null)continue;l=h}s.push(l),r=l,h=l.next}if(h!==null||c!==void 0){for(var I=c===void 0?[]:rt(c);h!==null;)(h.e.f&k)===0&&I.push(h),h=h.next;var lt=I.length;if(lt>0){var dt=g===0?u:null;Zt(e,I,dt)}}a.first=e.first&&e.first.e,a.last=r&&r.e;for(var ft of n.values())st(ft.e);n.clear()}function ut(a,t,e,n){At(a.v,t),a.i=e}function L(a,t,e,n,u,d,f,v,b,g,w){var _=(b&Xt)!==0,h=(b&pt)===0,c=_?h?St(u,!1,!1):F(u):u,r=(b&zt)===0?f:F(f),s={i:r,v:c,k:d,a:null,e:null,prev:e,next:n};try{if(a===null){var i=document.createDocumentFragment();i.append(a=et())}return s.e=V(()=>v(a,c,r,g),S),s.e.prev=e&&e.e,s.e.next=n&&n.e,e===null?w||(t.first=s):(e.next=s,e.e.next=s.e),n!==null&&(n.prev=s,n.e.prev=s.e),s}finally{}}function H(a,t,e){for(var n=a.next?a.next.e.nodes_start:e,u=t?t.e.nodes_start:e,d=a.e.nodes_start;d!==null&&d!==n;){var f=It(d);u.before(d),d=f}}function A(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Jt(a,t,e){Bt(()=>{var n=qt(()=>t(a,e?.())||{});if(n?.destroy)return()=>n.destroy()})}function G(a,t,e,n){var u=a.__style;if(S||u!==t){var d=Ht(t);(!S||d!==a.getAttribute("style"))&&(d==null?a.removeAttribute("style"):a.style.cssText=d),a.__style=t}return n}class z extends Error{constructor(){super("Tried to divide by 0")}}class D{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new D(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new D(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new D(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new z;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new z;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new z;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new z;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new z;return this.x/=t,this}divideScalarY(t){if(t===0)throw new z;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const n=this.magnitude();let u=0;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");u=e}if(e<0||t<0)throw RangeError("Can't clamp the magnitude to a negative value");const d=Math.max(Math.min(n,t),u);return this.resize(d),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const n=Math.min(t.x,e.x),u=Math.max(t.x,e.x);return this.x=tt(n,u),this}randomizeY(t,e){const n=Math.min(t.y,e.y),u=Math.max(t.y,e.y);return this.y=tt(n,u),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new D(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){if(t.isZero())throw new z;const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return R(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return R(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){if(this.isZero()||t.isZero())return 0;const e=(this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()),n=Math.max(-1,Math.min(1,e));return Math.acos(n)}angleDegWith(t){return R(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return R(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const n=this.angleWith(t);let u=Math.min(n,e);return this.cross(t)<0&&(u=-u),this.rotateBy(u)}rotateTowardsDeg(t,e){return this.rotateTowards(t,U(e))}rotateByDeg(t){const e=U(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=U(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),n=this.distanceY(t);return e*e+n*n}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){if(t==null)throw new TypeError("The magnitude argument must be defined");return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan2(this.y,this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ot=180/Math.PI;function tt(a,t){return Math.random()*(t-a)+a}function R(a){return a*ot}function U(a){return a/ot}var Kt=J('<div class="m-0"></div>');function Qt(a,t){nt(t,!1);let e=O(t,"target",12,void 0),n=O(t,"sketch",8,void 0),u=O(t,"parentDivStyle",8,"display: block;"),d=O(t,"debug",8,!1),f;const v=ct(),b={ref(){v("ref",e())},instance(){v("instance",f)}};function g(h){return e(h),{destroy(){e(void 0)}}}function w(h,c){return c.forEach(([r,s])=>h[r]=s),h}yt(async()=>{const h=await Ut(()=>import("./BeuaAw6C.js").then(i=>i.p),[],import.meta.url),{default:c}=h,s=Object.entries(h).filter(([i,o])=>o instanceof Function&&i[0]!=="_"&&i!=="default");d()&&console.log("available p5 native classes",s),f=new c(i=>(i=w(i,s),d()&&console.log("p5 instance",i),window._p5Instance=i,n()(i)),e()),b.ref(),b.instance()}),Vt();var _=Kt();Jt(_,h=>g?.(h)),at(()=>G(_,u())),Z(a,_),ht()}var Ft=J("<div><code> </code></div> <div> </div>",1),jt=J('<!> <div class="vector-values svelte-1r2uwu0"></div>',1);function ne(a,t){nt(t,!0);let e,n=Wt(1),u=null;const d=(r,s)=>{const i=r.width/2+M(n)*s.x,o=r.height/2-M(n)*s.y;r.strokeWeight(3);try{const y=s.clone().invert().rotateByDeg(45).resize(10);r.line(i,o,i+y.x,o-y.y);const l=s.clone().invert().rotateByDeg(-45).resize(10);r.line(i,o,i+l.x,o-l.y),r.line(r.width/2,r.height/2,i,o)}catch{r.circle(r.width/2,r.height/2,10)}},f=(r,s)=>{r.stroke(125,80),r.strokeWeight(1);for(let i=0;i<s.size/s.graduation;i++){const o=r.width/2+i*M(n)*s.graduation;r.line(o,0,o,r.height);const y=r.width/2-i*M(n)*s.graduation;r.line(y,0,y,r.height);const l=r.height/2+i*M(n)*s.graduation;r.line(0,l,r.width,l);const m=r.height/2-i*M(n)*s.graduation;r.line(0,m,r.width,m)}},v=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,b=(r,s)=>{kt(n,r.width/s.size)},g=(r,s)=>new D(s.x-r.width/2,r.height/2-s.y).divideScalar(M(n)),w=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{b(r,t.grid),r.background(240,240,240),f(r,t.grid);for(const{vec:s,color:i}of t.vectors)r.stroke(i),d(r,s);if(r.mouseIsPressed&&v(r)){const s=g(r,new D(r.mouseX,r.mouseY)),i=t.vectors.filter(o=>o.isDraggable);if(u!==null){const o=i[u];o.onUpdate&&o.onUpdate(s)}else for(let o=0;o<i.length;o++){const y=i[o],l=s.distance(y.vec);if(y.onUpdate&&(l<t.grid.graduation/2||i.length===1)){u=o,y.onUpdate(s);break}}}else u=null}};mt(()=>{e?.remove()});var _=jt(),h=j(_);Qt(h,{sketch:w});var c=$(h,2);Lt(c,21,()=>t.vectors,r=>r.name,(r,s)=>{var i=Ft(),o=j(i),y=W(o),l=W(y,!0);C(y),C(o);var m=$(o,2),x=W(m,!0);C(m),at(N=>{G(o,`color: ${M(s).color??""}`),K(l,M(s).name),G(m,`color: ${M(s).color??""}`),K(x,N)},[()=>M(s).vec.toString()]),Z(r,i)}),C(c),Z(a,_),ht()}export{ne as M,D as V};
