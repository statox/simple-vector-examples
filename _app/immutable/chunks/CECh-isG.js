import"./DsnmJJEf.js";import{f as ct,b as yt,o as mt,a as J}from"./BVhCGFvA.js";import{e as et,b as xt,s as B,h as z,al as gt,a as vt,z as M,$ as wt,r as bt,H as _t,c as K,d as q,k as P,am as Mt,an as Tt,f as U,i as Et,g as At,ao as St,y as zt,ap as Q,aq as rt,ar as Yt,as as Dt,j as it,p as Nt,at as Xt,au as pt,av as k,aw as st,ax as It,ay as Pt,az as Ct,aA as Ot,Y as Rt,af as Bt,u as qt,D as nt,F as G,J as at,K as V,M as ht,I as j,G as $,P as C,B as kt,Q as Wt,O as W}from"./DUP_8v5R.js";import{a as Ft}from"./BRzKQYUk.js";import{p as O,_ as Ht}from"./BPIv3Y7j.js";import{i as Ut}from"./w7Gt3Det.js";function Vt(a,t,e){for(var n=a.items,o=[],d=t.length,f=0;f<d;f++)Pt(t[f].e,o,!0);var v=d>0&&o.length===0&&e!==null;if(v){var b=e.parentNode;Ct(b),b.append(e),n.clear(),S(a,t[0].prev,t[d-1].next)}Ot(o,()=>{for(var g=0;g<d;g++){var w=t[g];v||(n.delete(w.k),S(a,w.prev,w.next)),st(w.e,!v)}})}function Zt(a,t,e,n,o,d=null){var f=a,v={flags:t,items:new Map,first:null};{var b=a;f=z?B(gt(b)):b.appendChild(et())}z&&vt();var g=null,w=!1,_=new Map,h=wt(()=>{var i=e();return Yt(i)?i:i==null?[]:rt(i)}),c,r;function s(){Lt(r,c,v,_,f,o,t,n,e),d!==null&&(c.length===0?g?it(g):g=U(()=>d(f)):g!==null&&Nt(g,()=>{g=null}))}xt(()=>{r??=Rt,c=M(h);var i=c.length;if(w&&i===0)return;w=i===0;let u=!1;if(z){var y=bt(f)===_t;y!==(i===0)&&(f=K(),B(f),q(!1),u=!0)}if(z){for(var l=null,m,x=0;x<i;x++){if(P.nodeType===Mt&&P.data===Tt){f=P,u=!0,q(!1);break}var T=c[x],A=n(T,x);m=Z(P,v,l,null,T,A,x,o,t,e),v.items.set(A,m),l=m}i>0&&B(K())}if(z)i===0&&d&&(g=U(()=>d(f)));else if(Et()){var Y=new Set,E=At;for(x=0;x<i;x+=1){T=c[x],A=n(T,x);var X=v.items.get(A)??_.get(A);X?ot(X,T,x):(m=Z(null,v,null,null,T,A,x,o,t,e,!0),_.set(A,m)),Y.add(A)}for(const[p,I]of v.items)Y.has(p)||E.skipped_effects.add(I.e);E.add_callback(s)}else s();u&&q(!0),M(h)}),z&&(f=P)}function Lt(a,t,e,n,o,d,f,v,b){var g=t.length,w=e.items,_=e.first,h=_,c,r=null,s=[],i=[],u,y,l,m;for(m=0;m<g;m+=1){if(u=t[m],y=v(u,m),l=w.get(y),l===void 0){var x=n.get(y);if(x!==void 0){n.delete(y),w.set(y,x);var T=r?r.next:h;S(e,r,x),S(e,x,T),F(x,T,o),r=x}else{var A=h?h.e.nodes_start:o;r=Z(A,e,r,r===null?e.first:r.next,u,y,m,d,f,b)}w.set(y,r),s=[],i=[],h=r.next;continue}if(ot(l,u,m),(l.e.f&k)!==0&&it(l.e),l!==h){if(c!==void 0&&c.has(l)){if(s.length<i.length){var Y=i[0],E;r=Y.prev;var X=s[0],p=s[s.length-1];for(E=0;E<s.length;E+=1)F(s[E],Y,o);for(E=0;E<i.length;E+=1)c.delete(i[E]);S(e,X.prev,p.next),S(e,r,X),S(e,p,Y),h=Y,r=p,m-=1,s=[],i=[]}else c.delete(l),F(l,h,o),S(e,l.prev,l.next),S(e,l,r===null?e.first:r.next),S(e,r,l),r=l;continue}for(s=[],i=[];h!==null&&h.k!==y;)(h.e.f&k)===0&&(c??=new Set).add(h),i.push(h),h=h.next;if(h===null)continue;l=h}s.push(l),r=l,h=l.next}if(h!==null||c!==void 0){for(var I=c===void 0?[]:rt(c);h!==null;)(h.e.f&k)===0&&I.push(h),h=h.next;var lt=I.length;if(lt>0){var dt=g===0?o:null;Vt(e,I,dt)}}a.first=e.first&&e.first.e,a.last=r&&r.e;for(var ft of n.values())st(ft.e);n.clear()}function ot(a,t,e,n){St(a.v,t),a.i=e}function Z(a,t,e,n,o,d,f,v,b,g,w){var _=(b&Xt)!==0,h=(b&pt)===0,c=_?h?zt(o,!1,!1):Q(o):o,r=(b&Dt)===0?f:Q(f),s={i:r,v:c,k:d,a:null,e:null,prev:e,next:n};try{if(a===null){var i=document.createDocumentFragment();i.append(a=et())}return s.e=U(()=>v(a,c,r,g),z),s.e.prev=e&&e.e,s.e.next=n&&n.e,e===null?w||(t.first=s):(e.next=s,e.e.next=s.e),n!==null&&(n.prev=s,n.e.prev=s.e),s}finally{}}function F(a,t,e){for(var n=a.next?a.next.e.nodes_start:e,o=t?t.e.nodes_start:e,d=a.e.nodes_start;d!==null&&d!==n;){var f=It(d);o.before(d),d=f}}function S(a,t,e){t===null?a.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Gt(a,t,e){Bt(()=>{var n=qt(()=>t(a,e?.())||{});if(n?.destroy)return()=>n.destroy()})}function L(a,t,e,n){var o=a.__style;if(z||o!==t){var d=Ft(t);(!z||d!==a.getAttribute("style"))&&(d==null?a.removeAttribute("style"):a.style.cssText=d),a.__style=t}return n}class D extends Error{constructor(){super("Tried to divide by 0")}}class N{x=0;y=0;constructor(t=0,e=0){if(!Number.isFinite(t))throw new TypeError("The x argument should be a number");if(!Number.isFinite(e))throw new TypeError("The y argument should be a number");this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(!Number.isFinite(t[0])||!Number.isFinite(t[1]))throw new TypeError("The members of the argument array must be numbers");return new N(t[0],t[1])};static fromObject=t=>{if(!Number.isFinite(t.x))throw new TypeError("The .x property of the argument object must be a number");if(!Number.isFinite(t.y))throw new TypeError("The .y property of the argument object must be a number");return new N(t.x,t.y)};static fromPolar=(t,e)=>{if(!Number.isFinite(t))throw new TypeError("The radians argument must be a number");if(!Number.isFinite(e))throw new TypeError("The magnitude argument must be a number");return new N(e*Math.cos(t),e*Math.sin(t))};addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new D;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new D;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new D;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new D;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new D;return this.x/=t,this}divideScalarY(t){if(t===0)throw new D;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}reflect(t){const e=t.clone().normalize();return this.subtract(e.multiplyScalar(2*this.dot(e)))}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const n=this.magnitude();let o=0;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");o=e}if(e<0||t<0)throw RangeError("Can't clamp the magnitude to a negative value");const d=Math.max(Math.min(n,t),o);return this.resize(d),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const n=Math.min(t.x,e.x),o=Math.max(t.x,e.x);return this.x=tt(n,o),this}randomizeY(t,e){const n=Math.min(t.y,e.y),o=Math.max(t.y,e.y);return this.y=tt(n,o),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new N(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){if(t.isZero())throw new D;const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return R(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return R(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;slope(){const t=this.y/this.x;return Object.is(t,-0)?0:t===-1/0?1/0:t}angleWith(t){if(this.isZero()||t.isZero())return 0;const e=(this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()),n=Math.max(-1,Math.min(1,e));return Math.acos(n)}angleDegWith(t){return R(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return R(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this}rotateByDeg(t){const e=H(t);return this.rotateBy(e)}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const n=this.angleWith(t);let o=Math.min(n,e);return this.cross(t)<0&&(o=-o),this.rotateBy(o)}rotateTowardsDeg(t,e){return this.rotateTowards(t,H(e))}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=H(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),n=this.distanceY(t);return e*e+n*n}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){if(t==null)throw new TypeError("The magnitude argument must be defined");return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan2(this.y,this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ut=180/Math.PI;function tt(a,t){return Math.random()*(t-a)+a}function R(a){return a*ut}function H(a){return a/ut}var Jt=G('<div class="m-0"></div>');function Kt(a,t){nt(t,!1);let e=O(t,"target",12,void 0),n=O(t,"sketch",8,void 0),o=O(t,"parentDivStyle",8,"display: block;"),d=O(t,"debug",8,!1),f;const v=ct(),b={ref(){v("ref",e())},instance(){v("instance",f)}};function g(h){return e(h),{destroy(){e(void 0)}}}function w(h,c){return c.forEach(([r,s])=>h[r]=s),h}yt(async()=>{const h=await Ht(()=>import("./BeuaAw6C.js").then(i=>i.p),[],import.meta.url),{default:c}=h,s=Object.entries(h).filter(([i,u])=>u instanceof Function&&i[0]!=="_"&&i!=="default");d()&&console.log("available p5 native classes",s),f=new c(i=>(i=w(i,s),d()&&console.log("p5 instance",i),window._p5Instance=i,n()(i)),e()),b.ref(),b.instance()}),Ut();var _=Jt();Gt(_,h=>g?.(h)),at(()=>L(_,o())),V(a,_),ht()}var Qt=G("<div><code> </code></div> <div> </div>",1),jt=G('<!> <div class="vector-values svelte-1r2uwu0"></div>',1);function ne(a,t){nt(t,!0);let e,n=Wt(1),o=null;const d=(r,s)=>{const i=r.width/2+M(n)*s.x,u=r.height/2-M(n)*s.y;r.strokeWeight(3);try{const y=s.clone().invert().rotateByDeg(45).resize(10);r.line(i,u,i+y.x,u-y.y);const l=s.clone().invert().rotateByDeg(-45).resize(10);r.line(i,u,i+l.x,u-l.y),r.line(r.width/2,r.height/2,i,u)}catch{r.circle(r.width/2,r.height/2,10)}},f=(r,s)=>{r.stroke(125,80),r.strokeWeight(1);for(let i=0;i<s.size/s.graduation;i++){const u=r.width/2+i*M(n)*s.graduation;r.line(u,0,u,r.height);const y=r.width/2-i*M(n)*s.graduation;r.line(y,0,y,r.height);const l=r.height/2+i*M(n)*s.graduation;r.line(0,l,r.width,l);const m=r.height/2-i*M(n)*s.graduation;r.line(0,m,r.width,m)}},v=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,b=(r,s)=>{kt(n,r.width/s.size)},g=(r,s)=>new N(s.x-r.width/2,r.height/2-s.y).divideScalar(M(n)),w=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{b(r,t.grid),r.background(240,240,240),f(r,t.grid);for(const{vec:s,color:i}of t.vectors)r.stroke(i),d(r,s);if(r.mouseIsPressed&&v(r)){const s=g(r,new N(r.mouseX,r.mouseY)),i=t.vectors.filter(u=>u.isDraggable);if(o!==null){const u=i[o];u.onUpdate&&u.onUpdate(s)}else for(let u=0;u<i.length;u++){const y=i[u],l=s.distance(y.vec);if(y.onUpdate&&(l<t.grid.graduation/2||i.length===1)){o=u,y.onUpdate(s);break}}}else o=null}};mt(()=>{e?.remove()});var _=jt(),h=j(_);Kt(h,{sketch:w});var c=$(h,2);Zt(c,21,()=>t.vectors,r=>r.name,(r,s)=>{var i=Qt(),u=j(i),y=W(u),l=W(y,!0);C(y),C(u);var m=$(u,2),x=W(m,!0);C(m),at(T=>{L(u,`color: ${M(s).color??""}`),J(l,M(s).name),L(m,`color: ${M(s).color??""}`),J(x,T)},[()=>M(s).vec.toString()]),V(r,i)}),C(c),V(a,_),ht()}export{ne as M,Kt as P,N as V,L as s};
