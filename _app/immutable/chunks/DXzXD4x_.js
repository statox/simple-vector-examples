import"./DsnmJJEf.js";import{c as ct,o as yt,a as xt,s as G}from"./BCOF04C3.js";import{n as et,o as mt,y as R,h as p,A as vt,B as gt,l as D,a4 as wt,az as bt,aA as _t,aB as K,x as q,z as P,C as Nt,ak as Mt,I as L,aD as Et,Z as Tt,aL as pt,aI as At,aM as J,ao as rt,ag as St,aN as Dt,aE as it,aF as Yt,aO as Xt,aP as zt,aQ as k,K as st,w as It,aR as Pt,an as Ot,aS as Bt,a2 as Ct,aG as Rt,Q as qt,p as nt,f as Q,t as at,a as Z,b as ht,k as j,s as $,r as O,c as W}from"./xTo1aypX.js";import{p as B,_ as kt}from"./Cq4wujC7.js";import{i as Wt}from"./y6y38fH4.js";function Ft(s,t,e){for(var n=s.items,a=[],l=t.length,c=0;c<l;c++)Pt(t[c].e,a,!0);var m=l>0&&a.length===0&&e!==null;if(m){var g=e.parentNode;Ot(g),g.append(e),n.clear(),E(s,t[0].prev,t[l-1].next)}Bt(a,()=>{for(var r=0;r<l;r++){var d=t[r];m||(n.delete(d.k),E(s,d.prev,d.next)),st(d.e,!m)}})}function Ht(s,t,e,n,a,l=null){var c=s,m={flags:t,items:new Map,first:null};{var g=s;c=p?R(vt(g)):g.appendChild(et())}p&&gt();var r=null,d=!1,y=new Map,i=wt(()=>{var h=e();return St(h)?h:h==null?[]:rt(h)}),f,u;function o(){Lt(u,f,m,y,c,a,t,n,e),l!==null&&(f.length===0?r?it(r):r=L(()=>l(c)):r!==null&&Yt(r,()=>{r=null}))}mt(()=>{u??=Ct,f=D(i);var h=f.length;if(d&&h===0)return;d=h===0;let b=!1;if(p){var N=bt(c)===_t;N!==(h===0)&&(c=K(),R(c),q(!1),b=!0)}if(p){for(var x=null,w,v=0;v<h;v++){if(P.nodeType===Nt&&P.data===Mt){c=P,b=!0,q(!1);break}var T=f[v],M=n(T,v);w=U(P,m,x,null,T,M,v,a,t,e),m.items.set(M,w),x=w}h>0&&R(K())}if(p)h===0&&l&&(r=L(()=>l(c)));else if(Et()){var A=new Set,_=Tt;for(v=0;v<h;v+=1){T=f[v],M=n(T,v);var X=m.items.get(M)??y.get(M);X?ut(X,T,v):(w=U(null,m,null,null,T,M,v,a,t,e,!0),y.set(M,w)),A.add(M)}for(const[z,I]of m.items)A.has(z)||_.skipped_effects.add(I.e);_.add_callback(o)}else o();b&&q(!0),D(i)}),p&&(c=P)}function Lt(s,t,e,n,a,l,c,m,g){var r=t.length,d=e.items,y=e.first,i=y,f,u=null,o=[],h=[],b,N,x,w;for(w=0;w<r;w+=1){if(b=t[w],N=m(b,w),x=d.get(N),x===void 0){var v=n.get(N);if(v!==void 0){n.delete(N),d.set(N,v);var T=u?u.next:i;E(e,u,v),E(e,v,T),F(v,T,a),u=v}else{var M=i?i.e.nodes_start:a;u=U(M,e,u,u===null?e.first:u.next,b,N,w,l,c,g)}d.set(N,u),o=[],h=[],i=u.next;continue}if(ut(x,b,w),(x.e.f&k)!==0&&it(x.e),x!==i){if(f!==void 0&&f.has(x)){if(o.length<h.length){var A=h[0],_;u=A.prev;var X=o[0],z=o[o.length-1];for(_=0;_<o.length;_+=1)F(o[_],A,a);for(_=0;_<h.length;_+=1)f.delete(h[_]);E(e,X.prev,z.next),E(e,u,X),E(e,z,A),i=A,u=z,w-=1,o=[],h=[]}else f.delete(x),F(x,i,a),E(e,x.prev,x.next),E(e,x,u===null?e.first:u.next),E(e,u,x),u=x;continue}for(o=[],h=[];i!==null&&i.k!==N;)(i.e.f&k)===0&&(f??=new Set).add(i),h.push(i),i=i.next;if(i===null)continue;x=i}o.push(x),u=x,i=x.next}if(i!==null||f!==void 0){for(var I=f===void 0?[]:rt(f);i!==null;)(i.e.f&k)===0&&I.push(i),i=i.next;var lt=I.length;if(lt>0){var dt=r===0?a:null;Ft(e,I,dt)}}s.first=e.first&&e.first.e,s.last=u&&u.e;for(var ft of n.values())st(ft.e);n.clear()}function ut(s,t,e,n){pt(s.v,t),s.i=e}function U(s,t,e,n,a,l,c,m,g,r,d){var y=(g&Xt)!==0,i=(g&zt)===0,f=y?i?At(a,!1,!1):J(a):a,u=(g&Dt)===0?c:J(c),o={i:u,v:f,k:l,a:null,e:null,prev:e,next:n};try{if(s===null){var h=document.createDocumentFragment();h.append(s=et())}return o.e=L(()=>m(s,f,u,r),p),o.e.prev=e&&e.e,o.e.next=n&&n.e,e===null?d||(t.first=o):(e.next=o,e.e.next=o.e),n!==null&&(n.prev=o,n.e.prev=o.e),o}finally{}}function F(s,t,e){for(var n=s.next?s.next.e.nodes_start:e,a=t?t.e.nodes_start:e,l=s.e.nodes_start;l!==null&&l!==n;){var c=It(l);a.before(l),l=c}}function E(s,t,e){t===null?s.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Zt(s,t,e){Rt(()=>{var n=qt(()=>t(s,e?.())||{});if(n?.destroy)return()=>n.destroy()})}function Ut(s,t){return s==null?null:String(s)}function V(s,t,e,n){var a=s.__style;if(p||a!==t){var l=Ut(t);(!p||l!==s.getAttribute("style"))&&(l==null?s.removeAttribute("style"):s.style.cssText=l),s.__style=t}return n}class S extends Error{constructor(){super("Tried to divide by 0")}}class Y{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new Y(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new Y(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new Y(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new S;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new S;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new S;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new S;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new S;return this.x/=t,this}divideScalarY(t){if(t===0)throw new S;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const n=this.magnitude();let a=Number.MIN_VALUE;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");a=e}const l=Math.max(Math.min(n,t),a);return this.resize(l),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const n=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return this.x=tt(n,a),this}randomizeY(t,e){const n=Math.min(t.y,e.y),a=Math.max(t.y,e.y);return this.y=tt(n,a),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new Y(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return C(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return C(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){return this.isZero()&&t.isZero()?0:Math.acos((this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()))}angleDegWith(t){return C(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return C(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const n=this.angleWith(t);let a=Math.min(n,e);return this.cross(t)<0&&(a=-a),this.rotateBy(a)}rotateTowardsDeg(t,e){return this.rotateTowards(t,H(e))}rotateByDeg(t){const e=H(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=H(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),n=this.distanceY(t);return e*e+n*n}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan(this.y/this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ot=180/Math.PI;function tt(s,t){return Math.random()*(t-s)+s}function C(s){return s*ot}function H(s){return s/ot}var Vt=Q('<div class="m-0"></div>');function Qt(s,t){nt(t,!1);let e=B(t,"target",12,void 0),n=B(t,"sketch",8,void 0),a=B(t,"parentDivStyle",8,"display: block;"),l=B(t,"debug",8,!1),c;const m=ct(),g={ref(){m("ref",e())},instance(){m("instance",c)}};function r(i){return e(i),{destroy(){e(void 0)}}}function d(i,f){return f.forEach(([u,o])=>i[u]=o),i}yt(async()=>{const i=await kt(()=>import("./BeuaAw6C.js").then(h=>h.p),[],import.meta.url),{default:f}=i,o=Object.entries(i).filter(([h,b])=>b instanceof Function&&h[0]!=="_"&&h!=="default");l()&&console.log("available p5 native classes",o),c=new f(h=>(h=d(h,o),l()&&console.log("p5 instance",h),window._p5Instance=h,n()(h)),e()),g.ref(),g.instance()}),Wt();var y=Vt();Zt(y,i=>r?.(i)),at(()=>V(y,a())),Z(s,y),ht()}var Gt=Q("<div><code> </code></div> <div> </div>",1),Kt=Q('<!> <div class="vector-values svelte-1hqmrji"></div>',1);function re(s,t){nt(t,!0);let e;const n=(r,d)=>{const y=r.width/2+d.x,i=r.height/2-d.y;try{const f=d.clone().invert().rotateByDeg(45).resize(10);r.line(y,i,y+f.x,i-f.y);const u=d.clone().invert().rotateByDeg(-45).resize(10);r.line(y,i,y+u.x,i-u.y),r.line(r.width/2,r.height/2,y,i)}catch{r.circle(r.width/2,r.height/2,10)}},a=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,l=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{r.background(240,240,240);for(const{vec:d,color:y}of t.vectors)r.stroke(y),n(r,d);if(r.mouseIsPressed&&a(r)){const d=new Y(r.mouseX-r.width/2,r.height/2-r.mouseY).fixPrecision(0);for(let y=0;y<t.vectors.length;y++){const i=t.vectors[y];if(!i.isDraggable)continue;if(d.distance(i.vec)<30&&i.onUpdate){i.onUpdate(d);break}}}}};xt(()=>{e?.remove()});var c=Kt(),m=j(c);Qt(m,{sketch:l});var g=$(m,2);Ht(g,21,()=>t.vectors,r=>r.name,(r,d)=>{var y=Gt(),i=j(y),f=W(i),u=W(f,!0);O(f),O(i);var o=$(i,2),h=W(o,!0);O(o),at(b=>{V(i,`color: ${D(d).color??""}`),G(u,D(d).name),V(o,`color: ${D(d).color??""}`),G(h,b)},[()=>D(d).vec.toString()]),Z(r,y)}),O(g),Z(s,c),ht()}export{re as M,Y as V};
