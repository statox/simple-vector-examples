import"./DsnmJJEf.js";import{c as ct,o as yt,b as mt,a as J}from"./DpQ93Ocf.js";import{$ as et,a0 as xt,a1 as C,h as p,a2 as vt,a3 as gt,c as Y,B as wt,a4 as bt,a5 as _t,a6 as K,a7 as R,a8 as P,a9 as Nt,aa as Mt,ab as F,ac as Et,Z as Tt,ad as pt,m as At,ae as Q,af as rt,ag as St,ah as Yt,ai as it,aj as Dt,ak as Xt,al as zt,am as k,an as st,ao as It,ap as Pt,aq as Ot,ar as qt,z as Bt,as as Ct,E as Rt,p as nt,f as G,j as at,k as L,l as ht,i as j,e as $,r as O,o as W}from"./LGVU8aKW.js";import{t as kt}from"./aun1856y.js";import{p as q,_ as Wt}from"./CpGVSpdZ.js";import{i as Ht}from"./mJToSM5U.js";function Zt(n,t,e){for(var s=n.items,a=[],l=t.length,c=0;c<l;c++)Pt(t[c].e,a,!0);var x=l>0&&a.length===0&&e!==null;if(x){var g=e.parentNode;Ot(g),g.append(e),s.clear(),E(n,t[0].prev,t[l-1].next)}qt(a,()=>{for(var i=0;i<l;i++){var d=t[i];x||(s.delete(d.k),E(n,d.prev,d.next)),st(d.e,!x)}})}function Ft(n,t,e,s,a,l=null){var c=n,x={flags:t,items:new Map,first:null};{var g=n;c=p?C(vt(g)):g.appendChild(et())}p&&gt();var i=null,d=!1,y=new Map,r=wt(()=>{var h=e();return St(h)?h:h==null?[]:rt(h)}),f,u;function o(){Lt(u,f,x,y,c,a,t,s,e),l!==null&&(f.length===0?i?it(i):i=F(()=>l(c)):i!==null&&Dt(i,()=>{i=null}))}xt(()=>{u??=Bt,f=Y(r);var h=f.length;if(d&&h===0)return;d=h===0;let b=!1;if(p){var N=bt(c)===_t;N!==(h===0)&&(c=K(),C(c),R(!1),b=!0)}if(p){for(var m=null,w,v=0;v<h;v++){if(P.nodeType===Nt&&P.data===Mt){c=P,b=!0,R(!1);break}var T=f[v],M=s(T,v);w=U(P,x,m,null,T,M,v,a,t,e),x.items.set(M,w),m=w}h>0&&C(K())}if(p)h===0&&l&&(i=F(()=>l(c)));else if(Et()){var A=new Set,_=Tt;for(v=0;v<h;v+=1){T=f[v],M=s(T,v);var X=x.items.get(M)??y.get(M);X?ut(X,T,v):(w=U(null,x,null,null,T,M,v,a,t,e,!0),y.set(M,w)),A.add(M)}for(const[z,I]of x.items)A.has(z)||_.skipped_effects.add(I.e);_.add_callback(o)}else o();b&&R(!0),Y(r)}),p&&(c=P)}function Lt(n,t,e,s,a,l,c,x,g){var i=t.length,d=e.items,y=e.first,r=y,f,u=null,o=[],h=[],b,N,m,w;for(w=0;w<i;w+=1){if(b=t[w],N=x(b,w),m=d.get(N),m===void 0){var v=s.get(N);if(v!==void 0){s.delete(N),d.set(N,v);var T=u?u.next:r;E(e,u,v),E(e,v,T),H(v,T,a),u=v}else{var M=r?r.e.nodes_start:a;u=U(M,e,u,u===null?e.first:u.next,b,N,w,l,c,g)}d.set(N,u),o=[],h=[],r=u.next;continue}if(ut(m,b,w),(m.e.f&k)!==0&&it(m.e),m!==r){if(f!==void 0&&f.has(m)){if(o.length<h.length){var A=h[0],_;u=A.prev;var X=o[0],z=o[o.length-1];for(_=0;_<o.length;_+=1)H(o[_],A,a);for(_=0;_<h.length;_+=1)f.delete(h[_]);E(e,X.prev,z.next),E(e,u,X),E(e,z,A),r=A,u=z,w-=1,o=[],h=[]}else f.delete(m),H(m,r,a),E(e,m.prev,m.next),E(e,m,u===null?e.first:u.next),E(e,u,m),u=m;continue}for(o=[],h=[];r!==null&&r.k!==N;)(r.e.f&k)===0&&(f??=new Set).add(r),h.push(r),r=r.next;if(r===null)continue;m=r}o.push(m),u=m,r=m.next}if(r!==null||f!==void 0){for(var I=f===void 0?[]:rt(f);r!==null;)(r.e.f&k)===0&&I.push(r),r=r.next;var lt=I.length;if(lt>0){var dt=i===0?a:null;Zt(e,I,dt)}}n.first=e.first&&e.first.e,n.last=u&&u.e;for(var ft of s.values())st(ft.e);s.clear()}function ut(n,t,e,s){pt(n.v,t),n.i=e}function U(n,t,e,s,a,l,c,x,g,i,d){var y=(g&Xt)!==0,r=(g&zt)===0,f=y?r?At(a,!1,!1):Q(a):a,u=(g&Yt)===0?c:Q(c),o={i:u,v:f,k:l,a:null,e:null,prev:e,next:s};try{if(n===null){var h=document.createDocumentFragment();h.append(n=et())}return o.e=F(()=>x(n,f,u,i),p),o.e.prev=e&&e.e,o.e.next=s&&s.e,e===null?d||(t.first=o):(e.next=o,e.e.next=o.e),s!==null&&(s.prev=o,s.e.prev=o.e),o}finally{}}function H(n,t,e){for(var s=n.next?n.next.e.nodes_start:e,a=t?t.e.nodes_start:e,l=n.e.nodes_start;l!==null&&l!==s;){var c=It(l);a.before(l),l=c}}function E(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Ut(n,t,e){Ct(()=>{var s=Rt(()=>t(n,e?.())||{});if(s?.destroy)return()=>s.destroy()})}function V(n,t,e,s){var a=n.__style;if(p||a!==t){var l=kt(t);(!p||l!==n.getAttribute("style"))&&(l==null?n.removeAttribute("style"):n.style.cssText=l),n.__style=t}return s}class S extends Error{constructor(){super("Tried to divide by 0")}}class D{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new D(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new D(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new D(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new S;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new S;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new S;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new S;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new S;return this.x/=t,this}divideScalarY(t){if(t===0)throw new S;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const s=this.magnitude();let a=Number.MIN_VALUE;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");a=e}const l=Math.max(Math.min(s,t),a);return this.resize(l),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const s=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return this.x=tt(s,a),this}randomizeY(t,e){const s=Math.min(t.y,e.y),a=Math.max(t.y,e.y);return this.y=tt(s,a),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new D(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return B(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return B(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){return this.isZero()&&t.isZero()?0:Math.acos((this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()))}angleDegWith(t){return B(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return B(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),s=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=s,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const s=this.angleWith(t);let a=Math.min(s,e);return this.cross(t)<0&&(a=-a),this.rotateBy(a)}rotateTowardsDeg(t,e){return this.rotateTowards(t,Z(e))}rotateByDeg(t){const e=Z(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=Z(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),s=this.distanceY(t);return e*e+s*s}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan(this.y/this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ot=180/Math.PI;function tt(n,t){return Math.random()*(t-n)+n}function B(n){return n*ot}function Z(n){return n/ot}var Vt=G('<div class="m-0"></div>');function Gt(n,t){nt(t,!1);let e=q(t,"target",12,void 0),s=q(t,"sketch",8,void 0),a=q(t,"parentDivStyle",8,"display: block;"),l=q(t,"debug",8,!1),c;const x=ct(),g={ref(){x("ref",e())},instance(){x("instance",c)}};function i(r){return e(r),{destroy(){e(void 0)}}}function d(r,f){return f.forEach(([u,o])=>r[u]=o),r}yt(async()=>{const r=await Wt(()=>import("./BeuaAw6C.js").then(h=>h.p),[],import.meta.url),{default:f}=r,o=Object.entries(r).filter(([h,b])=>b instanceof Function&&h[0]!=="_"&&h!=="default");l()&&console.log("available p5 native classes",o),c=new f(h=>(h=d(h,o),l()&&console.log("p5 instance",h),window._p5Instance=h,s()(h)),e()),g.ref(),g.instance()}),Ht();var y=Vt();Ut(y,r=>i?.(r)),at(()=>V(y,a())),L(n,y),ht()}var Jt=G("<div><code> </code></div> <div> </div>",1),Kt=G('<!> <div class="vector-values svelte-1hqmrji"></div>',1);function ie(n,t){nt(t,!0);let e;const s=(i,d)=>{const y=i.width/2+d.x,r=i.height/2-d.y;try{const f=d.clone().invert().rotateByDeg(45).resize(10);i.line(y,r,y+f.x,r-f.y);const u=d.clone().invert().rotateByDeg(-45).resize(10);i.line(y,r,y+u.x,r-u.y),i.line(i.width/2,i.height/2,y,r)}catch{i.circle(i.width/2,i.height/2,10)}},a=i=>i.mouseX>=0&&i.mouseY>=0&&i.mouseX<i.width&&i.mouseY<i.height,l=i=>{i.setup=()=>{e=i,i.createCanvas(300,300)},i.draw=()=>{i.background(240,240,240);for(const{vec:d,color:y}of t.vectors)i.stroke(y),s(i,d);if(i.mouseIsPressed&&a(i)){const d=new D(i.mouseX-i.width/2,i.height/2-i.mouseY).fixPrecision(0),y=t.vectors.filter(r=>r.isDraggable);for(const r of y){const f=d.distance(r.vec);if(r.onUpdate&&(f<30||y.length===1)){r.onUpdate(d);break}}}}};mt(()=>{e?.remove()});var c=Kt(),x=j(c);Gt(x,{sketch:l});var g=$(x,2);Ft(g,21,()=>t.vectors,i=>i.name,(i,d)=>{var y=Jt(),r=j(y),f=W(r),u=W(f,!0);O(f),O(r);var o=$(r,2),h=W(o,!0);O(o),at(b=>{V(r,`color: ${Y(d).color??""}`),J(u,Y(d).name),V(o,`color: ${Y(d).color??""}`),J(h,b)},[()=>Y(d).vec.toString()]),L(i,y)}),O(g),L(n,c),ht()}export{ie as M,D as V};
