import"./DsnmJJEf.js";import{c as ct,o as yt,e as mt,a as J}from"./_siXkS9L.js";import{a1 as et,a2 as xt,a3 as R,h as S,a4 as gt,a5 as vt,c as M,B as wt,a6 as bt,a7 as _t,a8 as K,a9 as k,aa as P,ab as Mt,ac as Nt,ad as Z,ae as Et,Z as Tt,af as At,m as St,ag as Q,ah as rt,ai as Yt,aj as zt,ak as it,al as Dt,am as Xt,an as It,ao as q,ap as st,aq as pt,ar as Pt,as as Ot,at as Ct,z as Bt,au as Rt,E as kt,p as nt,f as G,j as at,k as F,l as ht,i as j,e as $,r as O,s as qt,u as Wt,o as W}from"./BpBy4irg.js";import{a as Ht}from"./BRzKQYUk.js";import{p as C,_ as Vt}from"./2i1CAQ7Y.js";import{i as Zt}from"./qacXHyZ4.js";function Ft(h,t,e){for(var n=h.items,o=[],l=t.length,f=0;f<l;f++)Pt(t[f].e,o,!0);var x=l>0&&o.length===0&&e!==null;if(x){var w=e.parentNode;Ot(w),w.append(e),n.clear(),T(h,t[0].prev,t[l-1].next)}Ct(o,()=>{for(var m=0;m<l;m++){var g=t[m];x||(n.delete(g.k),T(h,g.prev,g.next)),st(g.e,!x)}})}function Lt(h,t,e,n,o,l=null){var f=h,x={flags:t,items:new Map,first:null};{var w=h;f=S?R(gt(w)):w.appendChild(et())}S&&vt();var m=null,g=!1,_=new Map,u=wt(()=>{var s=e();return Yt(s)?s:s==null?[]:rt(s)}),r,i;function a(){Ut(i,r,x,_,f,o,t,n,e),l!==null&&(r.length===0?m?it(m):m=Z(()=>l(f)):m!==null&&Dt(m,()=>{m=null}))}xt(()=>{i??=Bt,r=M(u);var s=r.length;if(g&&s===0)return;g=s===0;let c=!1;if(S){var v=bt(f)===_t;v!==(s===0)&&(f=K(),R(f),k(!1),c=!0)}if(S){for(var d=null,b,y=0;y<s;y++){if(P.nodeType===Mt&&P.data===Nt){f=P,c=!0,k(!1);break}var A=r[y],E=n(A,y);b=L(P,x,d,null,A,E,y,o,t,e),x.items.set(E,b),d=b}s>0&&R(K())}if(S)s===0&&l&&(m=Z(()=>l(f)));else if(Et()){var Y=new Set,N=Tt;for(y=0;y<s;y+=1){A=r[y],E=n(A,y);var X=x.items.get(E)??_.get(E);X?ut(X,A,y):(b=L(null,x,null,null,A,E,y,o,t,e,!0),_.set(E,b)),Y.add(E)}for(const[I,p]of x.items)Y.has(I)||N.skipped_effects.add(p.e);N.add_callback(a)}else a();c&&k(!0),M(u)}),S&&(f=P)}function Ut(h,t,e,n,o,l,f,x,w){var m=t.length,g=e.items,_=e.first,u=_,r,i=null,a=[],s=[],c,v,d,b;for(b=0;b<m;b+=1){if(c=t[b],v=x(c,b),d=g.get(v),d===void 0){var y=n.get(v);if(y!==void 0){n.delete(v),g.set(v,y);var A=i?i.next:u;T(e,i,y),T(e,y,A),H(y,A,o),i=y}else{var E=u?u.e.nodes_start:o;i=L(E,e,i,i===null?e.first:i.next,c,v,b,l,f,w)}g.set(v,i),a=[],s=[],u=i.next;continue}if(ut(d,c,b),(d.e.f&q)!==0&&it(d.e),d!==u){if(r!==void 0&&r.has(d)){if(a.length<s.length){var Y=s[0],N;i=Y.prev;var X=a[0],I=a[a.length-1];for(N=0;N<a.length;N+=1)H(a[N],Y,o);for(N=0;N<s.length;N+=1)r.delete(s[N]);T(e,X.prev,I.next),T(e,i,X),T(e,I,Y),u=Y,i=I,b-=1,a=[],s=[]}else r.delete(d),H(d,u,o),T(e,d.prev,d.next),T(e,d,i===null?e.first:i.next),T(e,i,d),i=d;continue}for(a=[],s=[];u!==null&&u.k!==v;)(u.e.f&q)===0&&(r??=new Set).add(u),s.push(u),u=u.next;if(u===null)continue;d=u}a.push(d),i=d,u=d.next}if(u!==null||r!==void 0){for(var p=r===void 0?[]:rt(r);u!==null;)(u.e.f&q)===0&&p.push(u),u=u.next;var lt=p.length;if(lt>0){var dt=m===0?o:null;Ft(e,p,dt)}}h.first=e.first&&e.first.e,h.last=i&&i.e;for(var ft of n.values())st(ft.e);n.clear()}function ut(h,t,e,n){At(h.v,t),h.i=e}function L(h,t,e,n,o,l,f,x,w,m,g){var _=(w&Xt)!==0,u=(w&It)===0,r=_?u?St(o,!1,!1):Q(o):o,i=(w&zt)===0?f:Q(f),a={i,v:r,k:l,a:null,e:null,prev:e,next:n};try{if(h===null){var s=document.createDocumentFragment();s.append(h=et())}return a.e=Z(()=>x(h,r,i,m),S),a.e.prev=e&&e.e,a.e.next=n&&n.e,e===null?g||(t.first=a):(e.next=a,e.e.next=a.e),n!==null&&(n.prev=a,n.e.prev=a.e),a}finally{}}function H(h,t,e){for(var n=h.next?h.next.e.nodes_start:e,o=t?t.e.nodes_start:e,l=h.e.nodes_start;l!==null&&l!==n;){var f=pt(l);o.before(l),l=f}}function T(h,t,e){t===null?h.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Gt(h,t,e){Rt(()=>{var n=kt(()=>t(h,e?.())||{});if(n?.destroy)return()=>n.destroy()})}function U(h,t,e,n){var o=h.__style;if(S||o!==t){var l=Ht(t);(!S||l!==h.getAttribute("style"))&&(l==null?h.removeAttribute("style"):h.style.cssText=l),h.__style=t}return n}class D extends Error{constructor(){super("Tried to divide by 0")}}class z{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new z(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new z(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new z(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new D;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new D;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new D;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new D;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new D;return this.x/=t,this}divideScalarY(t){if(t===0)throw new D;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const n=this.magnitude();let o=Number.MIN_VALUE;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");o=e}const l=Math.max(Math.min(n,t),o);return this.resize(l),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const n=Math.min(t.x,e.x),o=Math.max(t.x,e.x);return this.x=tt(n,o),this}randomizeY(t,e){const n=Math.min(t.y,e.y),o=Math.max(t.y,e.y);return this.y=tt(n,o),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new z(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return B(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return B(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){return this.isZero()&&t.isZero()?0:Math.acos((this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()))}angleDegWith(t){return B(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return B(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const n=this.angleWith(t);let o=Math.min(n,e);return this.cross(t)<0&&(o=-o),this.rotateBy(o)}rotateTowardsDeg(t,e){return this.rotateTowards(t,V(e))}rotateByDeg(t){const e=V(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=V(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),n=this.distanceY(t);return e*e+n*n}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan(this.y/this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ot=180/Math.PI;function tt(h,t){return Math.random()*(t-h)+h}function B(h){return h*ot}function V(h){return h/ot}var Jt=G('<div class="m-0"></div>');function Kt(h,t){nt(t,!1);let e=C(t,"target",12,void 0),n=C(t,"sketch",8,void 0),o=C(t,"parentDivStyle",8,"display: block;"),l=C(t,"debug",8,!1),f;const x=ct(),w={ref(){x("ref",e())},instance(){x("instance",f)}};function m(u){return e(u),{destroy(){e(void 0)}}}function g(u,r){return r.forEach(([i,a])=>u[i]=a),u}yt(async()=>{const u=await Vt(()=>import("./BeuaAw6C.js").then(s=>s.p),[],import.meta.url),{default:r}=u,a=Object.entries(u).filter(([s,c])=>c instanceof Function&&s[0]!=="_"&&s!=="default");l()&&console.log("available p5 native classes",a),f=new r(s=>(s=g(s,a),l()&&console.log("p5 instance",s),window._p5Instance=s,n()(s)),e()),w.ref(),w.instance()}),Zt();var _=Jt();Gt(_,u=>m?.(u)),at(()=>U(_,o())),F(h,_),ht()}var Qt=G("<div><code> </code></div> <div> </div>",1),jt=G('<!> <div class="vector-values svelte-1r2uwu0"></div>',1);function ne(h,t){nt(t,!0);let e,n=Wt(1);const o=(r,i)=>{const a=r.width/2+M(n)*i.x,s=r.height/2-M(n)*i.y;r.strokeWeight(3);try{const c=i.clone().invert().rotateByDeg(45).resize(10);r.line(a,s,a+c.x,s-c.y);const v=i.clone().invert().rotateByDeg(-45).resize(10);r.line(a,s,a+v.x,s-v.y),r.line(r.width/2,r.height/2,a,s)}catch{r.circle(r.width/2,r.height/2,10)}},l=(r,i)=>{r.stroke(125,80),r.strokeWeight(1);for(let a=0;a<i.size/i.graduation;a++){const s=r.width/2+a*M(n)*i.graduation;r.line(s,0,s,r.height);const c=r.width/2-a*M(n)*i.graduation;r.line(c,0,c,r.height);const v=r.height/2+a*M(n)*i.graduation;r.line(0,v,r.width,v);const d=r.height/2-a*M(n)*i.graduation;r.line(0,d,r.width,d)}},f=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,x=(r,i)=>{qt(n,r.width/i.size)},w=(r,i)=>new z(i.x-r.width/2,r.height/2-i.y).divideScalar(M(n)),m=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{x(r,t.grid),r.background(240,240,240),l(r,t.grid);for(const{vec:i,color:a}of t.vectors)r.stroke(a),o(r,i);if(r.mouseIsPressed&&f(r)){const i=w(r,new z(r.mouseX,r.mouseY)),a=t.vectors.filter(s=>s.isDraggable);for(const s of a){const c=i.distance(s.vec);if(s.onUpdate&&(c<t.grid.graduation/2||a.length===1)){s.onUpdate(i);break}}}}};mt(()=>{e?.remove()});var g=jt(),_=j(g);Kt(_,{sketch:m});var u=$(_,2);Lt(u,21,()=>t.vectors,r=>r.name,(r,i)=>{var a=Qt(),s=j(a),c=W(s),v=W(c,!0);O(c),O(s);var d=$(s,2),b=W(d,!0);O(d),at(y=>{U(s,`color: ${M(i).color??""}`),J(v,M(i).name),U(d,`color: ${M(i).color??""}`),J(b,y)},[()=>M(i).vec.toString()]),F(r,a)}),O(u),F(h,g),ht()}export{ne as M,z as V};
