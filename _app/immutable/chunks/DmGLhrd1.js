import"./DsnmJJEf.js";import{c as yt,o as ct,a as xt,s as J}from"./BHkBhdsm.js";import{m as et,n as mt,w as C,h as T,y as vt,z as gt,k as D,Z as wt,at as bt,au as _t,av as K,v as R,x as P,C as Mt,ad as Nt,F as L,ay as Et,aw as pt,aG as Tt,aE as At,aH as Q,ah as rt,a9 as St,aI as Dt,az as it,aA as zt,aJ as Xt,aK as Yt,aL as W,I as st,q as It,aM as Pt,ag as Ot,aN as qt,X as Bt,aB as Ct,M as Rt,p as nt,f as G,t as at,c as Z,d as ht,b as j,s as $,r as O,e as k}from"./DfNqCwya.js";import{p as q,_ as Wt}from"./C-u2Ds4w.js";import{i as kt}from"./BA3TD6Tw.js";function Ht(r,t,e){for(var s=r.items,a=[],o=t.length,x=0;x<o;x++)Pt(t[x].e,a,!0);var v=o>0&&a.length===0&&e!==null;if(v){var n=e.parentNode;Ot(n),n.append(e),s.clear(),E(r,t[0].prev,t[o-1].next)}qt(a,()=>{for(var u=0;u<o;u++){var d=t[u];v||(s.delete(d.k),E(r,d.prev,d.next)),st(d.e,!v)}})}function Ft(r,t,e,s,a,o=null){var x=r,v={flags:t,items:new Map,first:null};{var n=r;x=T?C(vt(n)):n.appendChild(et())}T&&gt();var u=null,d=!1,y=new Map,i=wt(()=>{var h=e();return St(h)?h:h==null?[]:rt(h)}),c,l;function f(){Lt(l,c,v,y,x,a,t,s,e),o!==null&&(c.length===0?u?it(u):u=L(()=>o(x)):u!==null&&zt(u,()=>{u=null}))}mt(()=>{l??=Bt,c=D(i);var h=c.length;if(d&&h===0)return;d=h===0;let _=!1;if(T){var M=bt(x)===_t;M!==(h===0)&&(x=K(),C(x),R(!1),_=!0)}if(T){for(var m=null,w,g=0;g<h;g++){if(P.nodeType===Mt&&P.data===Nt){x=P,_=!0,R(!1);break}var p=c[g],N=s(p,g);w=U(P,v,m,null,p,N,g,a,t,e),v.items.set(N,w),m=w}h>0&&C(K())}if(T)h===0&&o&&(u=L(()=>o(x)));else if(Et()){var A=new Set,b=pt;for(g=0;g<h;g+=1){p=c[g],N=s(p,g);var X=v.items.get(N)??y.get(N);X?ut(X,p,g):(w=U(null,v,null,null,p,N,g,a,t,e,!0),y.set(N,w)),A.add(N)}for(const[Y,I]of v.items)A.has(Y)||b.skipped_effects.add(I.e);b.add_callback(f)}else f();_&&R(!0),D(i)}),T&&(x=P)}function Lt(r,t,e,s,a,o,x,v,n){var u=t.length,d=e.items,y=e.first,i=y,c,l=null,f=[],h=[],_,M,m,w;for(w=0;w<u;w+=1){if(_=t[w],M=v(_,w),m=d.get(M),m===void 0){var g=s.get(M);if(g!==void 0){s.delete(M),d.set(M,g);var p=l?l.next:i;E(e,l,g),E(e,g,p),H(g,p,a),l=g}else{var N=i?i.e.nodes_start:a;l=U(N,e,l,l===null?e.first:l.next,_,M,w,o,x,n)}d.set(M,l),f=[],h=[],i=l.next;continue}if(ut(m,_,w),(m.e.f&W)!==0&&it(m.e),m!==i){if(c!==void 0&&c.has(m)){if(f.length<h.length){var A=h[0],b;l=A.prev;var X=f[0],Y=f[f.length-1];for(b=0;b<f.length;b+=1)H(f[b],A,a);for(b=0;b<h.length;b+=1)c.delete(h[b]);E(e,X.prev,Y.next),E(e,l,X),E(e,Y,A),i=A,l=Y,w-=1,f=[],h=[]}else c.delete(m),H(m,i,a),E(e,m.prev,m.next),E(e,m,l===null?e.first:l.next),E(e,l,m),l=m;continue}for(f=[],h=[];i!==null&&i.k!==M;)(i.e.f&W)===0&&(c??=new Set).add(i),h.push(i),i=i.next;if(i===null)continue;m=i}f.push(m),l=m,i=m.next}if(i!==null||c!==void 0){for(var I=c===void 0?[]:rt(c);i!==null;)(i.e.f&W)===0&&I.push(i),i=i.next;var ot=I.length;if(ot>0){var dt=u===0?a:null;Ht(e,I,dt)}}r.first=e.first&&e.first.e,r.last=l&&l.e;for(var ft of s.values())st(ft.e);s.clear()}function ut(r,t,e,s){Tt(r.v,t),r.i=e}function U(r,t,e,s,a,o,x,v,n,u,d){var y=(n&Xt)!==0,i=(n&Yt)===0,c=y?i?At(a,!1,!1):Q(a):a,l=(n&Dt)===0?x:Q(x),f={i:l,v:c,k:o,a:null,e:null,prev:e,next:s};try{if(r===null){var h=document.createDocumentFragment();h.append(r=et())}return f.e=L(()=>v(r,c,l,u),T),f.e.prev=e&&e.e,f.e.next=s&&s.e,e===null?d||(t.first=f):(e.next=f,e.e.next=f.e),s!==null&&(s.prev=f,s.e.prev=f.e),f}finally{}}function H(r,t,e){for(var s=r.next?r.next.e.nodes_start:e,a=t?t.e.nodes_start:e,o=r.e.nodes_start;o!==null&&o!==s;){var x=It(o);a.before(o),o=x}}function E(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Zt(r,t,e){Ct(()=>{var s=Rt(()=>t(r,e?.())||{});if(s?.destroy)return()=>s.destroy()})}function Ut(r,t){return r==null?null:String(r)}function V(r,t,e,s){var a=r.__style;if(T||a!==t){var o=Ut(t);(!T||o!==r.getAttribute("style"))&&(o==null?r.removeAttribute("style"):r.style.cssText=o),r.__style=t}return s}class S extends Error{constructor(){super("Tried to divide by 0")}}class z{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new z(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new z(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new z(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new S;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new S;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new S;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new S;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new S;return this.x/=t,this}divideScalarY(t){if(t===0)throw new S;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const s=this.magnitude();let a=Number.MIN_VALUE;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");a=e}const o=Math.max(Math.min(s,t),a);return this.resize(o),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const s=Math.min(t.x,e.x),a=Math.max(t.x,e.x);return this.x=tt(s,a),this}randomizeY(t,e){const s=Math.min(t.y,e.y),a=Math.max(t.y,e.y);return this.y=tt(s,a),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The amount argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new z(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return B(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return B(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){return this.isZero()&&t.isZero()?0:Math.acos((this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()))}angleDegWith(t){return B(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return B(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),s=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=s,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const s=this.angleWith(t);let a=Math.min(s,e);return this.cross(t)<0&&(a=-a),this.rotateBy(a)}rotateTowardsDeg(t,e){return this.rotateTowards(t,F(e))}rotateByDeg(t){const e=F(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=F(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),s=this.distanceY(t);return e*e+s*s}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan(this.y/this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const lt=180/Math.PI;function tt(r,t){return Math.random()*(t-r)+r}function B(r){return r*lt}function F(r){return r/lt}var Vt=G('<div class="m-0"></div>');function Gt(r,t){nt(t,!1);let e=q(t,"target",12,void 0),s=q(t,"sketch",8,void 0),a=q(t,"parentDivStyle",8,"display: block;"),o=q(t,"debug",8,!1),x;const v=yt(),n={ref(){v("ref",e())},instance(){v("instance",x)}};function u(i){return e(i),{destroy(){e(void 0)}}}function d(i,c){return c.forEach(([l,f])=>i[l]=f),i}ct(async()=>{const i=await Wt(()=>import("./BeuaAw6C.js").then(h=>h.p),[],import.meta.url),{default:c}=i,f=Object.entries(i).filter(([h,_])=>_ instanceof Function&&h[0]!=="_"&&h!=="default");o()&&console.log("available p5 native classes",f),x=new c(h=>(h=d(h,f),o()&&console.log("p5 instance",h),window._p5Instance=h,s()(h)),e()),n.ref(),n.instance()}),kt();var y=Vt();Zt(y,i=>u?.(i)),at(()=>V(y,a())),Z(r,y),ht()}var Jt=G("<div><code> </code></div> <div> </div>",1),Kt=G('<!> <div class="vector-values svelte-1hqmrji"></div>',1);function re(r,t){nt(t,!0);let e;const s=(n,u)=>{const d=n.width/2+u.x,y=n.height/2-u.y;try{const i=u.clone().invert().rotateByDeg(45).resize(10);n.line(d,y,d+i.x,y-i.y);const c=u.clone().invert().rotateByDeg(-45).resize(10);n.line(d,y,d+c.x,y-c.y),n.line(n.width/2,n.height/2,d,y)}catch{n.circle(n.width/2,n.height/2,10)}},a=n=>{n.setup=()=>{e=n,n.createCanvas(300,300)},n.draw=()=>{n.background(240,240,240);for(const{vec:u,color:d}of t.vectors)n.stroke(d),s(n,u);if(n.mouseIsPressed){const u=new z(n.mouseX-n.width/2,n.height/2-n.mouseY).fixPrecision(0);for(let d=0;d<t.vectors.length;d++){const y=t.vectors[d];if(!y.isDraggable)continue;if(u.distance(y.vec)<30&&y.onUpdate){y.onUpdate(u);break}}}}};xt(()=>{e?.remove()});var o=Kt(),x=j(o);Gt(x,{sketch:a});var v=$(x,2);Ft(v,21,()=>t.vectors,n=>n.name,(n,u)=>{var d=Jt(),y=j(d),i=k(y),c=k(i,!0);O(i),O(y);var l=$(y,2),f=k(l,!0);O(l),at(h=>{V(y,`color: ${D(u).color??""}`),J(c,D(u).name),V(l,`color: ${D(u).color??""}`),J(f,h)},[()=>D(u).vec.toString()]),Z(n,d)}),O(v),Z(r,o),ht()}export{re as M,z as V};
