import"./DsnmJJEf.js";import{e as ct,o as yt,d as mt,f as xt,a as K}from"./C7HefTNw.js";import{e as et,b as gt,s as q,h as S,al as vt,a as wt,z as M,$ as bt,r as _t,H as Mt,c as Q,d as k,k as P,am as Nt,an as Tt,f as V,i as Et,g as At,ao as St,y as Dt,ap as F,aq as rt,ar as Yt,as as zt,j as it,p as Xt,at as pt,au as It,av as W,aw as st,ax as Pt,ay as Ct,az as Ot,aA as Rt,Y as Bt,af as qt,u as kt,D as nt,F as J,J as at,K as Z,M as ht,I as j,G as $,O,P as C,B as Wt,Q as Ht}from"./DUP_8v5R.js";import{a as Ut}from"./BRzKQYUk.js";import{p as R,_ as Vt}from"./BsuHOuQY.js";import{i as Zt}from"./w7Gt3Det.js";function Lt(n,t,e){for(var s=n.items,h=[],f=t.length,y=0;y<f;y++)Ct(t[y].e,h,!0);var v=f>0&&h.length===0&&e!==null;if(v){var b=e.parentNode;Ot(b),b.append(e),s.clear(),A(n,t[0].prev,t[f-1].next)}Rt(h,()=>{for(var g=0;g<f;g++){var w=t[g];v||(s.delete(w.k),A(n,w.prev,w.next)),st(w.e,!v)}})}function Gt(n,t,e,s,h,f=null){var y=n,v={flags:t,items:new Map,first:null};{var b=n;y=S?q(vt(b)):b.appendChild(et())}S&&wt();var g=null,w=!1,_=new Map,a=bt(()=>{var i=e();return Yt(i)?i:i==null?[]:rt(i)}),m,d;function r(){Jt(d,m,v,_,y,h,t,s,e),f!==null&&(m.length===0?g?it(g):g=V(()=>f(y)):g!==null&&Xt(g,()=>{g=null}))}gt(()=>{d??=Bt,m=M(a);var i=m.length;if(w&&i===0)return;w=i===0;let l=!1;if(S){var u=_t(y)===Mt;u!==(i===0)&&(y=Q(),q(y),k(!1),l=!0)}if(S){for(var o=null,x,c=0;c<i;c++){if(P.nodeType===Nt&&P.data===Tt){y=P,l=!0,k(!1);break}var T=m[c],N=s(T,c);x=L(P,v,o,null,T,N,c,h,t,e),v.items.set(N,x),o=x}i>0&&q(Q())}if(S)i===0&&f&&(g=V(()=>f(y)));else if(Et()){var D=new Set,E=At;for(c=0;c<i;c+=1){T=m[c],N=s(T,c);var X=v.items.get(N)??_.get(N);X?ut(X,T,c):(x=L(null,v,null,null,T,N,c,h,t,e,!0),_.set(N,x)),D.add(N)}for(const[p,I]of v.items)D.has(p)||E.skipped_effects.add(I.e);E.add_callback(r)}else r();l&&k(!0),M(a)}),S&&(y=P)}function Jt(n,t,e,s,h,f,y,v,b){var g=t.length,w=e.items,_=e.first,a=_,m,d=null,r=[],i=[],l,u,o,x;for(x=0;x<g;x+=1){if(l=t[x],u=v(l,x),o=w.get(u),o===void 0){var c=s.get(u);if(c!==void 0){s.delete(u),w.set(u,c);var T=d?d.next:a;A(e,d,c),A(e,c,T),H(c,T,h),d=c}else{var N=a?a.e.nodes_start:h;d=L(N,e,d,d===null?e.first:d.next,l,u,x,f,y,b)}w.set(u,d),r=[],i=[],a=d.next;continue}if(ut(o,l,x),(o.e.f&W)!==0&&it(o.e),o!==a){if(m!==void 0&&m.has(o)){if(r.length<i.length){var D=i[0],E;d=D.prev;var X=r[0],p=r[r.length-1];for(E=0;E<r.length;E+=1)H(r[E],D,h);for(E=0;E<i.length;E+=1)m.delete(i[E]);A(e,X.prev,p.next),A(e,d,X),A(e,p,D),a=D,d=p,x-=1,r=[],i=[]}else m.delete(o),H(o,a,h),A(e,o.prev,o.next),A(e,o,d===null?e.first:d.next),A(e,d,o),d=o;continue}for(r=[],i=[];a!==null&&a.k!==u;)(a.e.f&W)===0&&(m??=new Set).add(a),i.push(a),a=a.next;if(a===null)continue;o=a}r.push(o),d=o,a=o.next}if(a!==null||m!==void 0){for(var I=m===void 0?[]:rt(m);a!==null;)(a.e.f&W)===0&&I.push(a),a=a.next;var lt=I.length;if(lt>0){var dt=g===0?h:null;Lt(e,I,dt)}}n.first=e.first&&e.first.e,n.last=d&&d.e;for(var ft of s.values())st(ft.e);s.clear()}function ut(n,t,e,s){St(n.v,t),n.i=e}function L(n,t,e,s,h,f,y,v,b,g,w){var _=(b&pt)!==0,a=(b&It)===0,m=_?a?Dt(h,!1,!1):F(h):h,d=(b&zt)===0?y:F(y),r={i:d,v:m,k:f,a:null,e:null,prev:e,next:s};try{if(n===null){var i=document.createDocumentFragment();i.append(n=et())}return r.e=V(()=>v(n,m,d,g),S),r.e.prev=e&&e.e,r.e.next=s&&s.e,e===null?w||(t.first=r):(e.next=r,e.e.next=r.e),s!==null&&(s.prev=r,s.e.prev=r.e),r}finally{}}function H(n,t,e){for(var s=n.next?n.next.e.nodes_start:e,h=t?t.e.nodes_start:e,f=n.e.nodes_start;f!==null&&f!==s;){var y=Pt(f);h.before(f),f=y}}function A(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Kt(n,t,e){qt(()=>{var s=kt(()=>t(n,e?.())||{});if(s?.destroy)return()=>s.destroy()})}function G(n,t,e,s){var h=n.__style;if(S||h!==t){var f=Ut(t);(!S||f!==n.getAttribute("style"))&&(f==null?n.removeAttribute("style"):n.style.cssText=f),n.__style=t}return s}class Y extends Error{constructor(){super("Tried to divide by 0")}}class z{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(t[0]===null||t[0]===void 0||Number.isNaN(Number(t[0]))||Number.isNaN(t[0]))throw new TypeError("The length of the argument array must be at least 2");if(t[1]===null||t[1]===void 0||Number.isNaN(Number(t[1]))||Number.isNaN(t[1]))throw new TypeError("The length of the argument array must be at least 2");return new z(Number(t[0]),Number(t[1]))};static fromObject=t=>{if(t.x===null||t.x===void 0||t.y===null||t.y===void 0)throw new TypeError("The argument object must have a .x and .y properties");if(Number.isNaN(Number(t.x))||Number.isNaN(t.x))throw new TypeError("The .x property of the argument object must be a number");if(Number.isNaN(Number(t.y))||Number.isNaN(t.y))throw new TypeError("The .y property of the argument object must be a number");return new z(Number(t.x),Number(t.y))};static fromPolar=(t,e)=>new z(e*Math.cos(t),e*Math.sin(t));addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new Y;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new Y;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new Y;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new Y;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new Y;return this.x/=t,this}divideScalarY(t){if(t===0)throw new Y;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}normalize(){const t=this.length();return this.divideScalar(t),this}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clamp(t,e){const s=this.magnitude();let h=0;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");h=e}if(e<0||t<0)throw RangeError("Can't clamp the magnitude to a negative value");const f=Math.max(Math.min(s,t),h);return this.resize(f),this}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const s=Math.min(t.x,e.x),h=Math.max(t.x,e.x);return this.x=tt(s,h),this}randomizeY(t,e){const s=Math.min(t.y,e.y),h=Math.max(t.y,e.y);return this.y=tt(s,h),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new z(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){if(t.isZero())throw new Y;const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return B(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return B(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;angleWith(t){if(this.isZero()||t.isZero())return 0;const e=(this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()),s=Math.max(-1,Math.min(1,e));return Math.acos(s)}angleDegWith(t){return B(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return B(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),s=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=s,this}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const s=this.angleWith(t);let h=Math.min(s,e);return this.cross(t)<0&&(h=-h),this.rotateBy(h)}rotateTowardsDeg(t,e){return this.rotateTowards(t,U(e))}rotateByDeg(t){const e=U(t);return this.rotateBy(e)}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=U(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),s=this.distanceY(t);return e*e+s*s}length(){return Math.sqrt(this.lengthSq())}magnitude=this.length;lengthSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){if(t==null)throw new TypeError("The magnitude argument must be defined");return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan2(this.y,this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ot=180/Math.PI;function tt(n,t){return Math.random()*(t-n)+n}function B(n){return n*ot}function U(n){return n/ot}var Qt=J('<div class="m-0"></div>');function Ft(n,t){nt(t,!1);let e=R(t,"target",12,void 0),s=R(t,"sketch",8,void 0),h=R(t,"parentDivStyle",8,"display: block;"),f=R(t,"debug",8,!1),y;const v=ct(),b={ref(){v("ref",e())},instance(){v("instance",y)}};function g(a){return e(a),{destroy(){e(void 0)}}}function w(a,m){return m.forEach(([d,r])=>a[d]=r),a}yt(async()=>{const a=await Vt(()=>import("./BeuaAw6C.js").then(i=>i.p),[],import.meta.url),{default:m}=a,r=Object.entries(a).filter(([i,l])=>l instanceof Function&&i[0]!=="_"&&i!=="default");f()&&console.log("available p5 native classes",r),y=new m(i=>(i=w(i,r),f()&&console.log("p5 instance",i),window._p5Instance=i,s()(i)),e()),b.ref(),b.instance()}),Zt();var _=Qt();Kt(_,a=>g?.(a)),at(()=>G(_,h())),Z(n,_),ht()}var jt=n=>n.preventDefault(),$t=J("<div><code> </code></div> <div> </div>",1),te=J('<div><!></div> <div class="vector-values svelte-1r2uwu0"></div>',1);function he(n,t){nt(t,!0);let e,s=Ht(1),h=null;const f=(r,i)=>{const l=r.width/2+M(s)*i.x,u=r.height/2-M(s)*i.y;r.strokeWeight(3);try{const o=i.clone().invert().rotateByDeg(45).resize(10);r.line(l,u,l+o.x,u-o.y);const x=i.clone().invert().rotateByDeg(-45).resize(10);r.line(l,u,l+x.x,u-x.y),r.line(r.width/2,r.height/2,l,u)}catch{r.circle(r.width/2,r.height/2,10)}},y=(r,i)=>{r.stroke(125,80),r.strokeWeight(1);for(let l=0;l<i.size/i.graduation;l++){const u=r.width/2+l*M(s)*i.graduation;r.line(u,0,u,r.height);const o=r.width/2-l*M(s)*i.graduation;r.line(o,0,o,r.height);const x=r.height/2+l*M(s)*i.graduation;r.line(0,x,r.width,x);const c=r.height/2-l*M(s)*i.graduation;r.line(0,c,r.width,c)}},v=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,b=(r,i)=>{Wt(s,r.width/i.size)},g=(r,i)=>new z(i.x-r.width/2,r.height/2-i.y).divideScalar(M(s)),w=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{b(r,t.grid),r.background(240,240,240),y(r,t.grid);for(const{vec:i,color:l}of t.vectors)r.stroke(l),f(r,i);if(r.mouseIsPressed&&v(r)){const i=g(r,new z(r.mouseX,r.mouseY)),l=t.vectors.filter(u=>u.isDraggable);if(h!==null){const u=l[h];u.onUpdate&&u.onUpdate(i)}else for(let u=0;u<l.length;u++){const o=l[u],x=i.distance(o.vec);if(o.onUpdate&&(x<t.grid.graduation/2||l.length===1)){h=u,o.onUpdate(i);break}}}else h=null}};xt(()=>{e?.remove()});var _=te(),a=j(_);a.__touchmove=[jt];var m=O(a);Ft(m,{sketch:w}),C(a);var d=$(a,2);Gt(d,21,()=>t.vectors,r=>r.name,(r,i)=>{var l=$t(),u=j(l),o=O(u),x=O(o,!0);C(o),C(u);var c=$(u,2),T=O(c,!0);C(c),at(N=>{G(u,`color: ${M(i).color??""}`),K(x,M(i).name),G(c,`color: ${M(i).color??""}`),K(T,N)},[()=>M(i).vec.toString()]),Z(r,l)}),C(d),Z(n,_),ht()}mt(["touchmove"]);export{he as M,z as V};
