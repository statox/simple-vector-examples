import"./DsnmJJEf.js";import{e as st,b as ct,s as W,h as z,at as yt,a as mt,v as _,V as xt,r as gt,H as vt,c as tt,d as F,k as P,aq as wt,aw as bt,f as Z,i as Mt,g as _t,aO as Tt,q as Et,aP as et,aA as at,an as At,aQ as St,j as nt,p as zt,aR as Yt,aS as Dt,aT as U,aE as ht,as as Xt,aU as Nt,az as pt,aV as It,R as Pt,af as Ct,u as Ot,z as Q,A as k,D as K,F as q,G as $,B as L,I as B,J as C,C as rt,x as Rt,L as Bt}from"./B6V4Mh0Q.js";import{a as j,f as qt,b as kt,o as Wt}from"./Dkdr-M-y.js";import{r as Ft,s as Ut}from"./nSUsuyja.js";import{a as Vt}from"./BRzKQYUk.js";import{p as O,_ as Ht}from"./e7pp0Oip.js";import{i as Zt}from"./OT4hqeG4.js";function Lt(n,t,e){for(var a=n.items,h=[],l=t.length,f=0;f<l;f++)Nt(t[f].e,h,!0);var v=l>0&&h.length===0&&e!==null;if(v){var b=e.parentNode;pt(b),b.append(e),a.clear(),S(n,t[0].prev,t[l-1].next)}It(h,()=>{for(var g=0;g<l;g++){var w=t[g];v||(a.delete(w.k),S(n,w.prev,w.next)),ht(w.e,!v)}})}function jt(n,t,e,a,h,l=null){var f=n,v={flags:t,items:new Map,first:null};{var b=n;f=z?W(yt(b)):b.appendChild(st())}z&&mt();var g=null,w=!1,M=new Map,o=xt(()=>{var i=e();return At(i)?i:i==null?[]:at(i)}),c,r;function s(){Gt(r,c,v,M,f,h,t,a,e),l!==null&&(c.length===0?g?nt(g):g=Z(()=>l(f)):g!==null&&zt(g,()=>{g=null}))}ct(()=>{r??=Pt,c=_(o);var i=c.length;if(w&&i===0)return;w=i===0;let u=!1;if(z){var y=gt(f)===vt;y!==(i===0)&&(f=tt(),W(f),F(!1),u=!0)}if(z){for(var d=null,m,x=0;x<i;x++){if(P.nodeType===wt&&P.data===bt){f=P,u=!0,F(!1);break}var T=c[x],A=a(T,x);m=G(P,v,d,null,T,A,x,h,t,e),v.items.set(A,m),d=m}i>0&&W(tt())}if(z)i===0&&l&&(g=Z(()=>l(f)));else if(Mt()){var D=new Set,E=_t;for(x=0;x<i;x+=1){T=c[x],A=a(T,x);var N=v.items.get(A)??M.get(A);N?ot(N,T,x):(m=G(null,v,null,null,T,A,x,h,t,e,!0),M.set(A,m)),D.add(A)}for(const[p,I]of v.items)D.has(p)||E.skipped_effects.add(I.e);E.add_callback(s)}else s();u&&F(!0),_(o)}),z&&(f=P)}function Gt(n,t,e,a,h,l,f,v,b){var g=t.length,w=e.items,M=e.first,o=M,c,r=null,s=[],i=[],u,y,d,m;for(m=0;m<g;m+=1){if(u=t[m],y=v(u,m),d=w.get(y),d===void 0){var x=a.get(y);if(x!==void 0){a.delete(y),w.set(y,x);var T=r?r.next:o;S(e,r,x),S(e,x,T),V(x,T,h),r=x}else{var A=o?o.e.nodes_start:h;r=G(A,e,r,r===null?e.first:r.next,u,y,m,l,f,b)}w.set(y,r),s=[],i=[],o=r.next;continue}if(ot(d,u,m),(d.e.f&U)!==0&&nt(d.e),d!==o){if(c!==void 0&&c.has(d)){if(s.length<i.length){var D=i[0],E;r=D.prev;var N=s[0],p=s[s.length-1];for(E=0;E<s.length;E+=1)V(s[E],D,h);for(E=0;E<i.length;E+=1)c.delete(i[E]);S(e,N.prev,p.next),S(e,r,N),S(e,p,D),o=D,r=p,m-=1,s=[],i=[]}else c.delete(d),V(d,o,h),S(e,d.prev,d.next),S(e,d,r===null?e.first:r.next),S(e,r,d),r=d;continue}for(s=[],i=[];o!==null&&o.k!==y;)(o.e.f&U)===0&&(c??=new Set).add(o),i.push(o),o=o.next;if(o===null)continue;d=o}s.push(d),r=d,o=d.next}if(o!==null||c!==void 0){for(var I=c===void 0?[]:at(c);o!==null;)(o.e.f&U)===0&&I.push(o),o=o.next;var lt=I.length;if(lt>0){var dt=g===0?h:null;Lt(e,I,dt)}}n.first=e.first&&e.first.e,n.last=r&&r.e;for(var ft of a.values())ht(ft.e);a.clear()}function ot(n,t,e,a){Tt(n.v,t),n.i=e}function G(n,t,e,a,h,l,f,v,b,g,w){var M=(b&Yt)!==0,o=(b&Dt)===0,c=M?o?Et(h,!1,!1):et(h):h,r=(b&St)===0?f:et(f),s={i:r,v:c,k:l,a:null,e:null,prev:e,next:a};try{if(n===null){var i=document.createDocumentFragment();i.append(n=st())}return s.e=Z(()=>v(n,c,r,g),z),s.e.prev=e&&e.e,s.e.next=a&&a.e,e===null?w||(t.first=s):(e.next=s,e.e.next=s.e),a!==null&&(a.prev=s,a.e.prev=s.e),s}finally{}}function V(n,t,e){for(var a=n.next?n.next.e.nodes_start:e,h=t?t.e.nodes_start:e,l=n.e.nodes_start;l!==null&&l!==a;){var f=Xt(l);h.before(l),l=f}}function S(n,t,e){t===null?n.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function Jt(n,t,e){Ct(()=>{var a=Ot(()=>t(n,e?.())||{});if(a?.destroy)return()=>a.destroy()})}function J(n,t,e,a){var h=n.__style;if(z||h!==t){var l=Vt(t);(!z||l!==n.getAttribute("style"))&&(l==null?n.removeAttribute("style"):n.style.cssText=l),n.__style=t}return a}var Qt=k('<h2 class="svelte-1vjuzwj"><a aria-label="back" class="svelte-1vjuzwj"><i class="fas fa-arrow-left"></i></a> </h2>');function ue(n,t){Q(t,!0);var e=Qt(),a=B(e),h=L(a);C(e),K(l=>{Ut(a,"href",l),j(h,` ${t.title??""}`)},[()=>Ft("/")]),q(n,e),$()}class X extends Error{constructor(){super("Tried to divide by 0")}}class Y{x=0;y=0;constructor(t=0,e=0){if(!Number.isFinite(t))throw new TypeError("The x argument should be a number");if(!Number.isFinite(e))throw new TypeError("The y argument should be a number");this.x=t,this.y=e}static fromArray=t=>{if(t.length<2)throw new TypeError("The length of the argument array must be at least 2");if(!Number.isFinite(t[0])||!Number.isFinite(t[1]))throw new TypeError("The members of the argument array must be numbers");return new Y(t[0],t[1])};static fromObject=t=>{if(!Number.isFinite(t.x))throw new TypeError("The .x property of the argument object must be a number");if(!Number.isFinite(t.y))throw new TypeError("The .y property of the argument object must be a number");return new Y(t.x,t.y)};static fromPolar=(t,e)=>{if(!Number.isFinite(t))throw new TypeError("The radians argument must be a number");if(!Number.isFinite(e))throw new TypeError("The magnitude argument must be a number");return new Y(e*Math.cos(t),e*Math.sin(t))};static randomUnitVector=()=>new Y(1,0).rotateBy(Math.random()*2*Math.PI);addX(t){return this.x+=t.x,this}addY(t){return this.y+=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addScalarX(t){return this.x+=t,this}addScalarY(t){return this.y+=t,this}subtractX(t){return this.x-=t.x,this}subtractY(t){return this.y-=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}subtractScalarX(t){return this.x-=t,this}subtractScalarY(t){return this.y-=t,this}divideX(t){if(t.x===0)throw new X;return this.x/=t.x,this}divideY(t){if(t.y===0)throw new X;return this.y/=t.y,this}divide(t){if(t.x===0||t.y===0)throw new X;return this.x/=t.x,this.y/=t.y,this}divideScalar(t){if(t===0)throw new X;return this.x/=t,this.y/=t,this}divideScalarX(t){if(t===0)throw new X;return this.x/=t,this}divideScalarY(t){if(t===0)throw new X;return this.y/=t,this}multiplyX(t){return this.x*=t.x,this}multiplyY(t){return this.y*=t.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}multiplyScalarX(t){return this.x*=t,this}multiplyScalarY(t){return this.y*=t,this}invertX(){return this.x*=-1,this}invertY(){return this.y*=-1,this}invert(){return this.x*=-1,this.y*=-1,this}reflect(t){const e=t.clone().normalize();return this.subtract(e.multiplyScalar(2*this.dot(e)))}normalize(){return this.divideScalar(this.magnitude())}norm=this.normalize;clampX(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.x=Math.max(this.x,e)}return this.x=Math.min(this.x,t),this}clampY(t,e){if(e!=null){if(e>t)throw RangeError("min must be smaller than max");this.y=Math.max(this.y,e)}return this.y=Math.min(this.y,t),this}clampMag(t,e){const a=this.magnitude();let h=0;if(e!=null){if(e>t)throw RangeError("min must be smaller than max");h=e}if(e<0||t<0)throw RangeError("Can't clamp the magnitude to a negative value");const l=Math.max(Math.min(a,t),h);return this.resize(l),this}clampAxes(t,e){if(e!=null&&e>t)throw RangeError("min must be smaller than max");return this.clampX(t,e).clampY(t,e)}limitX(t,e){return Math.abs(this.x)>t&&(this.x*=e),this}limitY(t,e){return Math.abs(this.y)>t&&(this.y*=e),this}limit(t,e){return this.limitX(t,e),this.limitY(t,e),this}randomizeX(t,e){const a=Math.min(t.x,e.x),h=Math.max(t.x,e.x);return this.x=it(a,h),this}randomizeY(t,e){const a=Math.min(t.y,e.y),h=Math.max(t.y,e.y);return this.y=it(a,h),this}randomize(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this}randomizeAny(t,e){return Math.random()<.5?this.randomizeX(t,e):this.randomizeY(t,e),this}unfloat(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}fixPrecision(t=8){return this.x=Number(this.x.toFixed(t)),this.y=Number(this.y.toFixed(t)),this}mixX(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.x=(1-e)*this.x+e*t.x,this}mixY(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.y=(1-e)*this.y+e*t.y,this}mix(t,e=.5){if(e<0||e>1)throw new RangeError("The mixFactor argument must be between 0 and 1.");return this.mixX(t,e),this.mixY(t,e),this}clone(){return new Y(this.x,this.y)}copyX(t){return this.x=t.x,this}copyY(t){return this.y=t.y,this}copy(t){return this.x=t.x,this.y=t.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}projectOnto(t){if(t.isZero())throw new X;const e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this}horizontalAngle(){return Math.atan2(this.y,this.x)}horizontalAngleDeg(){return R(this.horizontalAngle())}verticalAngle(){return Math.atan2(this.x,this.y)}verticalAngleDeg(){return R(this.verticalAngle())}angle=this.horizontalAngle;direction=this.horizontalAngle;angleDeg=this.horizontalAngleDeg;slope(){const t=this.y/this.x;return Object.is(t,-0)?0:t===-1/0?1/0:t}angleWith(t){if(this.isZero()||t.isZero())return 0;const e=(this.x*t.x+this.y*t.y)/(this.magnitude()*t.magnitude()),a=Math.max(-1,Math.min(1,e));return Math.acos(a)}angleDegWith(t){return R(this.angleWith(t))}orientedAngleWith(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)}orientedAngleDegWith(t){return R(this.orientedAngleWith(t))}rotateBy(t){const e=this.x*Math.cos(t)-this.y*Math.sin(t),a=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=a,this}rotateByDeg(t){const e=H(t);return this.rotateBy(e)}rotateTowards(t,e){if(e<=0)throw new RangeError("The max angle must be positive");const a=this.angleWith(t);let h=Math.min(a,e);return this.cross(t)<0&&(h=-h),this.rotateBy(h)}rotateTowardsDeg(t,e){return this.rotateTowards(t,H(e))}rotateTo(t){return this.rotateBy(t-this.horizontalAngle())}rotateToDeg(t){const e=H(t);return this.rotateTo(e)}distanceX(t){return this.x-t.x}absDistanceX(t){return Math.abs(this.distanceX(t))}distanceY(t){return this.y-t.y}absDistanceY(t){return Math.abs(this.distanceY(t))}distance(t){return Math.sqrt(this.distanceSq(t))}distanceSq(t){const e=this.distanceX(t),a=this.distanceY(t);return e*e+a*a}distanceManhattan(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}distanceChebyshev(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))}mag(){return Math.sqrt(this.magSq())}magnitude=this.mag;magSq(){return this.x*this.x+this.y*this.y}zero(){return this.x=0,this.y=0,this}resize(t){if(t==null)throw new TypeError("The magnitude argument must be defined");return this.normalize(),this.multiplyScalar(t),this}isParallelTo(t){return Math.abs(this.cross(t))<1e-6}isPerpendicularTo(t){return Math.abs(this.dot(t))<1e-6}isZero(){return this.x===0&&this.y===0}isEqualTo(t){return this.x===t.x&&this.y===t.y}isCloseTo(t,e=1e-6){return Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e}toString(){return`x:${this.x}, y:${this.y}`}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}toPolar(){const t=Math.atan2(this.y,this.x);return{r:Math.sqrt(this.x*this.x+this.y*this.y),theta:Number.isNaN(t)?0:t}}}const ut=180/Math.PI;function it(n,t){return Math.random()*(t-n)+n}function R(n){return n*ut}function H(n){return n/ut}var Kt=k('<div class="m-0"></div>');function $t(n,t){Q(t,!1);let e=O(t,"target",12,void 0),a=O(t,"sketch",8,void 0),h=O(t,"parentDivStyle",8,"display: block;"),l=O(t,"debug",8,!1),f;const v=qt(),b={ref(){v("ref",e())},instance(){v("instance",f)}};function g(o){return e(o),{destroy(){e(void 0)}}}function w(o,c){return c.forEach(([r,s])=>o[r]=s),o}kt(async()=>{const o=await Ht(()=>import("./BeuaAw6C.js").then(i=>i.p),[],import.meta.url),{default:c}=o,s=Object.entries(o).filter(([i,u])=>u instanceof Function&&i[0]!=="_"&&i!=="default");l()&&console.log("available p5 native classes",s),f=new c(i=>(i=w(i,s),l()&&console.log("p5 instance",i),window._p5Instance=i,a()(i)),e()),b.ref(),b.instance()}),Zt();var M=Kt();Jt(M,o=>g?.(o)),K(()=>J(M,h())),q(n,M),$()}var te=k("<div><code> </code></div> <div> </div>",1),ee=k('<!> <div class="vector-values svelte-1r2uwu0"></div>',1);function le(n,t){Q(t,!0);let e,a=Bt(1),h=null;const l=(r,s)=>{const i=r.width/2+_(a)*s.x,u=r.height/2-_(a)*s.y;r.strokeWeight(3);try{const y=s.clone().invert().rotateByDeg(45).resize(10);r.line(i,u,i+y.x,u-y.y);const d=s.clone().invert().rotateByDeg(-45).resize(10);r.line(i,u,i+d.x,u-d.y),r.line(r.width/2,r.height/2,i,u)}catch{r.circle(r.width/2,r.height/2,10)}},f=(r,s)=>{r.stroke(125,80),r.strokeWeight(1);for(let i=0;i<s.size/s.graduation;i++){const u=r.width/2+i*_(a)*s.graduation;r.line(u,0,u,r.height);const y=r.width/2-i*_(a)*s.graduation;r.line(y,0,y,r.height);const d=r.height/2+i*_(a)*s.graduation;r.line(0,d,r.width,d);const m=r.height/2-i*_(a)*s.graduation;r.line(0,m,r.width,m)}},v=r=>r.mouseX>=0&&r.mouseY>=0&&r.mouseX<r.width&&r.mouseY<r.height,b=(r,s)=>{Rt(a,r.width/s.size)},g=(r,s)=>new Y(s.x-r.width/2,r.height/2-s.y).divideScalar(_(a)),w=r=>{r.setup=()=>{e=r,r.createCanvas(300,300)},r.draw=()=>{b(r,t.grid),r.background(240,240,240),f(r,t.grid);for(const{vec:s,color:i}of t.vectors)r.stroke(i),l(r,s);if(r.mouseIsPressed&&v(r)){const s=g(r,new Y(r.mouseX,r.mouseY)),i=t.vectors.filter(u=>u.isDraggable);if(h!==null){const u=i[h];u.onUpdate&&u.onUpdate(s)}else for(let u=0;u<i.length;u++){const y=i[u],d=s.distance(y.vec);if(y.onUpdate&&(d<t.grid.graduation/2||i.length===1)){h=u,y.onUpdate(s);break}}}else h=null}};Wt(()=>{e?.remove()});var M=ee(),o=rt(M);$t(o,{sketch:w});var c=L(o,2);jt(c,21,()=>t.vectors,r=>r.name,(r,s)=>{var i=te(),u=rt(i),y=B(u),d=B(y,!0);C(y),C(u);var m=L(u,2),x=B(m,!0);C(m),K(T=>{J(u,`color: ${_(s).color??""}`),j(d,_(s).name),J(m,`color: ${_(s).color??""}`),j(x,T)},[()=>_(s).vec.toString()]),q(r,i)}),C(c),q(n,M),$()}export{ue as M,$t as P,Y as V,le as a,J as s};
